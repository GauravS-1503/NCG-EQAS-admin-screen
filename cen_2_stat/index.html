<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Centre Specific</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/style.css?v=9">
  <link rel="stylesheet" href="../assets/tata_hosp_sample_status.css?v=9">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <script src="../assets/include.js?v=9" defer></script>
  <style>
    .bucket-tab { display:inline-flex; align-items:center; gap:.4rem; }
    .bucket-badge { font-size:12px; }
    #statusTableBody tr:first-child td { color:#0f5132; } 
  </style>

</head>
<body>

<!-- Top Bar -->
<div id="header"></div>

<!-- Layout -->
<div class="d-flex" id="contentArea">
  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar"></aside>

  <!-- Main Content -->
  <div class="main-content flex-grow-1 p-4" id="mainContent">
    <div class="d-flex align-items-center gap-2 mb-3 flex-wrap">
      <h5 class="text-uppercase mb-0" style="font-size: 1.2rem;">Tata Memorial Hospital (Center No: 01)</h5>
      <div>
        <select id="moduleSelect" class="form-select" style="width: 200px;">
          <option value="IHC">ImmunoHistochemistry (IHC)</option>
          <option value="TSP">Tissue Processing (TSP)</option>
          <option value="H&E">H&E</option>
        </select>
      </div>
    </div>
    <div class="bg-white p-3 rounded shadow-sm">
      <div id="ihcView">
        <div class="bucket-tabs d-flex gap-3 flex-wrap mb-2 mb-md-0">
          <div class="bucket-tab active-tab" data-status="status" onclick="setActiveTab(this)">
            Status
          </div>

          <div class="bucket-tab" data-status="reporting" onclick="setActiveTab(this)">
            Sample Reporting
          </div>
        </div>


        <table class="table table-bordered table-striped mb-0">
          <thead class="table-dark text-white align-middle" id="ihctableHeader">
          </thead>

          
          <tbody id="statusTableBody" style="display: none;">
            <tr>
              <td style="text-align: center;">2025</td>
              <td style="text-align: center;">27</td>
              <td style="text-align: center;">ER</td>
              <td style="text-align: center;">Run Completed</td>
            </tr>
            <tr>
              <td style="text-align: center;">2025</td>
              <td style="text-align: center;">27</td>
              <td style="text-align: center;">PR</td>
              <td style="text-align: center;">Sample Sent by NCG</td>
            </tr>
            <tr>
              <td style="text-align: center;">2025</td>
              <td style="text-align: center;">26</td>
              <td style="text-align: center;">Her2/Neu</td>
              <td style="text-align: center;">Sample Received by Center</td>
            </tr>
            <tr>
              <td style="text-align: center;">2025</td>
              <td style="text-align: center;">28</td>
              <td style="text-align: center;">Lymphoma</td>
              <td style="text-align: center;">Sample Reported by Center</td>
            </tr>
            <tr>
              <td style="text-align: center;">2025</td>
              <td style="text-align: center;">29</td>
              <td style="text-align: center;">Miscellaneous</td>
              <td style="text-align: center;">Sample Received by NCG</td>
            </tr>
          </tbody>
            
          <tbody id="receiveTableBody">
            <tr>
              <td class="courier-cell" data-original="Blue Dart">Blue Dart</td>
              <td>27</td>
              <td class="tracking-cell" data-original="TRK10234567">TRK10234567</td>
              <td>ER</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>

            </tr>
            <tr>
              <td class="courier-cell" data-original="Blue Dart">Blue Dart</td>
              <td>27</td>
              <td class="tracking-cell" data-original="TRK10234567">TRK10234567</td>
              <td>PR</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="Blue Dart">Blue Dart</td>
              <td>26</td>
              <td class="tracking-cell" data-original="TRK10234567">TRK10234567</td>
              <td>Her2/Neu</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="Blue Dart">Blue Dart</td>
              <td>28</td>
              <td class="tracking-cell" data-original="TRK10234567">TRK10234567</td>
              <td>Lymphoma</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="Blue Dart">Blue Dart</td>
              <td>29</td>
              <td class="tracking-cell" data-original="TRK10234567">TRK10234567</td>
              <td>Miscellaneous</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
          </tbody>

          <tbody id="sendTableBody" style="display: none;">
            <tr>
              <td class="courier-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name">
              </td>
              <td>27</td>
              <td class="tracking-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID">
              </td>
              <td>ER</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>

            </tr>
            <tr>
              <td class="courier-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name">
              </td>
              <td>27</td>
              <td class="tracking-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID">
              </td>
              <td>PR</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name">
              </td>
              <td>26</td>
              <td class="tracking-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID">
              </td>
              <td>Her2/Neu</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name">
              </td>
              <td>28</td>
              <td class="tracking-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID">
              </td>
              <td>Lymphoma</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
            </tr>
            <tr>
              <td class="courier-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name">
              </td>
              <td>29</td>
              <td class="tracking-cell" data-original="">
                <input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID">
              </td>
              <td>Miscellaneous</td>
              <td style="text-align: center;">01-07-2025</td>
              <td style="text-align: center;">
                <button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button>
              </td>
          </tbody>
          <tbody id="reportingTableBody" style="display: none;">
            <tr>
              <td>27</td>
              <td>ER</td>
              <td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal" data-submodule="ER" data-run="27">
                  View Protocol
                </button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-ER" data-run="27">
                  Enter Results
                </button>
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-toggle="modal" data-bs-target="#modal-ER" data-run="27">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td class="text-center">               
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>  
            </tr>
            <tr>
              <td>27</td>
              <td>PR</td>
              <td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal" data-submodule="PR" data-run="27">
                  View Protocol
                </button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-PR" data-run="27">
                  Enter Results
                </button>
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-toggle="modal" data-bs-target="#modal-PR" data-run="27">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td class="text-center">               
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>
            </tr>
            <tr>
              <td>26</td>
              <td>Her2/Neu</td>
              <td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal" data-submodule="Her2/Neu" data-run="26">
                  View Protocol
                </button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-HER2" data-run="26">
                  Enter Results
                </button>
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-target="#modal-HER2" data-run="26">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td> 
            </tr>
            <tr>
              <td>28</td>
              <td>Lymphoma</td>
              <td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal" data-submodule="Lymphoma" data-run="28">
                  View Protocol
                </button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-LYM" data-run="28">
                  Enter Results
                </button>
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-toggle="modal" data-bs-target="#modal-LYM" data-run="28">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td class="text-center">                
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>  
            </tr>
            <tr>
              <td>29</td>
              <td>Miscellaneous</td>
              <td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal" data-submodule="Miscellaneous" data-run="27">
                  View Protocol
                </button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modal-MISC" data-run="29">
                  Enter Results
                </button>
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-toggle="modal" data-bs-target="#modal-MISC" data-run="29">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>  
            </tr>         
          </tbody>



        </table>
        <!-- Table for 'All' bucket (with Status column instead of Approval) -->
        <table class="table table-bordered table-striped mb-0" id="tableAll" style="display: none;">
          <thead class="table-dark text-white align-middle">
            <tr>
              <th style="width: 5%; text-align: center;">Edit</th>
              <th>
                Date
                <div class="dropdown d-inline ms-1">
                  <a href="#" class="text-white" data-bs-toggle="dropdown">
                    <i class="bi bi-caret-down-fill"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Latest</a></li>
                    <li><a class="dropdown-item" href="#">Oldest</a></li>
                  </ul>
                </div>
              </th>
              <th>
                NCG Member
                <div class="dropdown d-inline ms-1">
                  <a href="#" class="text-white" data-bs-toggle="dropdown">
                    <i class="bi bi-caret-down-fill"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Yes</a></li>
                    <li><a class="dropdown-item" href="#">No</a></li>
                  </ul>
                </div>
              </th>
              <th>Centre Name</th>
              <th>
                Modules Enrolled
                <div class="dropdown d-inline ms-1">
                  <a href="#" class="text-white" data-bs-toggle="dropdown">
                    <i class="bi bi-caret-down-fill"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">All</a></li>
                    <li><a class="dropdown-item" href="#">IHC</a></li>
                    <li><a class="dropdown-item" href="#">TSP</a></li>
                    <li><a class="dropdown-item" href="#">H&E</a></li>
                  </ul>
                </div>
              </th>
              <th style="width: 5%;">Run</th>
              <th style="width: 10%;">Status</th> <!-- ✅ Slimmer width -->
            </tr>
          </thead>

          <tbody>
            <tr>
              <td class="text-center">
                <button class="btn btn-primary btn-sm" onclick="editRegistration('Tata Memorial Hospital')">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td>01-07-2025</td>
              <td>Yes</td>
              <td><a href="#" class="text-primary text-decoration-none" onclick="openModalForm('tata')">Tata Memorial Hospital</a></td>
              <td>IHC, TSP, H&E</td>
              <td>01</td>
              <td>Pending</td> <!-- ✅ Status instead of buttons -->
            </tr>
            <tr>
              <td class="text-center">
                <button class="btn btn-primary btn-sm" onclick="editRegistration('Apollo Chennai')">
                  <i class="bi bi-pencil-square"></i>
                </button>
              </td>
              <td>03-07-2025</td>
              <td>No</td>
              <td><a href="#" class="text-primary text-decoration-none" onclick="openModalForm('apollo')">Apollo Chennai</a></td>
              <td>IHC, TSP, H&E</td>
              <td>02</td>
              <td>Approved/Disapproved</td>
            </tr>
            <!-- Add approved/disapproved rows here if needed -->
          </tbody>
        </table>
      </div>
      <!-- TSP VIEW (new) -->
      <div id="tspView" style="display:none;">
        <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
          <div class="bucket-tabs d-flex gap-3 flex-wrap mb-2 mb-md-0">
            <div class="bucket-tab active-tab" data-status="tsp-status"   onclick="setActiveTabTSP(this)">Status</div>
            <div class="bucket-tab"          data-status="tsp-reporting"onclick="setActiveTabTSP(this)">Sample Reporting</div>
          </div>
        </div>

        <table class="table table-bordered table-striped mb-0">
          <thead class="table-dark text-white align-middle" id="tspTableHeader"></thead>

          <!-- Status -->
          <tbody id="tspStatusTableBody">
            <tr>
              <td class="text-center">2025</td>
              <td class="text-center">27</td>
              <td class="text-center">TSP</td>
              <td class="text-center">Pending</td>
            </tr>
          </tbody>

          <!-- Received Sample -->
          <tbody id="tspReceiveTableBody" style="display:none;">
            <tr>
              <td>Blue Dart</td><td>27</td><td>TRK10234567</td><td>TSP</td>
              <td class="text-center">01-07-2025</td>
              <td class="text-center"><button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button></td>
            </tr>
            <!-- more rows as needed -->
          </tbody>

          <!-- Sample Reporting (NO "Enter Results" column for TSP) -->
          <tbody id="tspReportingTableBody" style="display:none;">
            <tr>
              <td>27</td><td>TSP</td><td>01/10/2025</td>
              <td class="text-center">
                <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#protocolModal">View Protocol</button>
              </td>
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#resultModal1">
                  Enter Results
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report" data-bs-toggle="modal" data-bs-target="#resultModal1">
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>
            </tr>
            <!-- more rows as needed -->
          </tbody>

          <!-- Send Sample -->
          <tbody id="tspSendTableBody" style="display:none;">
            <tr>
              <td><input type="text" class="form-control form-control-sm" placeholder="Enter Courier Name"></td>
              <td>27</td>
              <td><input type="text" class="form-control form-control-sm" placeholder="Enter Tracking ID"></td>
              <td>TSP</td>
              <td class="text-center">01-07-2025</td>
              <td class="text-center"><button class="btn btn-success btn-sm px-2 py-1" onclick="confirmReceive(this)">✓</button></td>
            </tr>
          </tbody>
        </table>
      </div>

            <!-- H&E VIEW (starts hidden) -->
      <div id="heView" style="display:none;">
        <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
          <div class="bucket-tabs d-flex gap-3 flex-wrap mb-2 mb-md-0">
            <div class="bucket-tab active-tab" data-status="he-status" onclick="setActiveTabHE(this)">Status</div>
            <div class="bucket-tab" data-status="he-examine" onclick="setActiveTabHE(this)">Assign Slides</div>
            <div class="bucket-tab" data-status="he-reporting" onclick="setActiveTabHE(this)">Reporting</div>
          </div>
        </div>

        <table class="table table-bordered table-striped mb-0">
          <thead class="table-dark text-white align-middle" id="heTableHeader"></thead>

          <!-- Status -->
          <tbody id="heStatusTableBody">
            <tr><td class="text-center">2025</td><td class="text-center">27</td><td class="text-center">1</td><td class="text-center">Diagnostic Histopathology</td><td class="text-center">Pending</td></tr>
            <tr><td class="text-center">2025</td><td class="text-center">28</td><td class="text-center">1</td><td class="text-center">MDSR</td><td class="text-center">Result Submitted</td></tr>
          </tbody>

          <!-- Examine Slides -->
          <tbody id="heExamineTableBody" style="display:none;">
            <tr>
              <td class="text-center">1</td>
              <td class="text-center">www.example.com</td>
              <td class="text-center">2025</td>
              <td class="text-center">Diagnostic Histopathology</td>
              <td class="text-center">11/08/2025</td>
              <td class="text-center">12/09/2025</td>
              <td class="text-center">
                <button type="button" class="btn btn-primary butn-sm btn-login" data-bs-toggle="modal" data-bs-target="#loginModal" data-pass="demo_password">Enter</button>
              </td>  
            </tr>
            <tr>
              <td class="text-center">1</td>
              <td class="text-center">www.example.com</td>
              <td class="text-center">2025</td>
              <td class="text-center">MDSR</td>
              <td class="text-center">11/08/2025</td>
              <td class="text-center">12/09/2025</td>
              <td class="text-center">
                <button type="button" class="btn btn-primary butn-sm btn-login" data-bs-toggle="modal" data-bs-target="#loginModal" data-pass="demo_password">Enter</button>
              </td>
            </tr>
          </tbody>


          <!-- Reporting -->
          <tbody id="heReportingTableBody" style="display:none;">         
            <tr>
              <td class="text-center">26</td>
              <td class="text-center">Diagnostic Histopathology</td>
              <td class="text-center">01/10/2025</td>
              <td class="text-center">1</td>              
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#heresultModaldigital">
                  Enter Results
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report">
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>  
            </tr>
            <tr>
              <td class="text-center">27</td>
              <td class="text-center">MDSR</td>
              <td class="text-center">01/10/2025</td>
              <td class="text-center">1</td>              
              <td class="text-center enter-results">
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#heresultModalmdsr">
                  Enter Results
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-outline-secondary btn-sm btn-edit-report" title="Edit Report">
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button class="btn btn-outline-info btn-sm ms-1 btn-view-report" title="View Report">
                  <i class="bi bi-eye"></i>
                </button>
              </td>
              <td class="text-center">
                <button class="btn btn-success btn-sm btn-commit-report" title="Commit Report">
                  <i class="bi bi-check2-circle me-1"></i> Commit
                </button>
              </td>  
            </tr>   
          </tbody>
        </table>

      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModal" aria-hidden="true">
  <div class="modal-dialog" role="document" style="max-width: 520px;">
    <div class="modal-content" style="border-radius: 12px; overflow: hidden;">
      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center" style="background-color:#2f3e63;color:#fff;padding:12px 18px;">
        <h5 class="modal-title mb-0" id="loginModalLabel">Enter Login Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form id="loginForm">
        <!-- Body -->
        <div class="modal-body">
          <!-- Context -->
          <div class="small text-muted mb-3">
            <div><strong>Batch:</strong> <span id="loginBatch"></span></div>
            <div><strong>Sub-Module:</strong> <span id="loginSubmodule"></span></div>
            <div><strong>Year:</strong> <span id="loginYear"></span></div>
            <div class="text-truncate"><strong>Link:</strong> <span id="loginLink"></span></div>
          </div>

          <div class="mb-3">
            <label class="form-label" for="loginUsername">Username</label>
            <input type="text" class="form-control" id="loginUsername" placeholder="Enter username" required>
          </div>

          <div class="mb-2">
            <label class="form-label" for="loginPassword">Password</label>
            <input type="password" class="form-control" id="loginPassword" placeholder="Enter password" required>
          </div>

          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="loginRemember">
            <label class="form-check-label" for="loginRemember">Remember these details</label>
          </div>
        </div>

        <!-- Footer -->
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>






<div class="modal fade" id="protocolModal" tabindex="-1" aria-labelledby="protocolModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" style="max-width: 900px;">
    <div class="modal-content p-0" style="border-radius: 12px; overflow: hidden;">
      
      <!-- Dark Blue Header with Close Button -->
      <div class="d-flex justify-content-between align-items-center" style="background-color: #2f3e63; color: white; padding: 14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="protocolModalLabel">Protocol</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body bg-white px-4 py-3">
        <h5 class="fw-semibold mt-3">Staining Platform</h5>
        <div class="mb-3">
          <label for="stainingPlatform" class="form-label">Select Staining Platform</label>
          <select class="form-select" id="stainingPlatform">
            <option value="">Select</option>
            <option>Dako Autostainer</option>
            <option>Dako Autostainer Link 48+</option>
            <option>Dako Omnis</option>
            <option>Leica BOND III</option>
            <option>Leica BOND Max</option>
            <option>Leica BOND Prime</option>
            <option>Sakura Tissue-Tek Genie</option>
            <option>Thermo Autostainer 36/48/72</option>
            <option>Ventana Benchmark GX</option>
            <option>Ventana Benchmark Ultra</option>
            <option>Ventana Benchmark Ultra Plus</option>
            <option>Ventana Benchmark XT</option>
            <option>Pathnsitu Caliber 30</option>
            <option>Manual</option>
            <option>Others</option>
          </select>
        </div>
        <div class="mb-3 d-none" id="otherStainingPlatformDiv">
          <label for="otherStainingPlatform" class="form-label">Please specify</label>
          <input type="text" class="form-control" id="otherStainingPlatform" placeholder="Enter platform name">
        </div>

        <h5 class="fw-semibold mt-3">Primary Antibody</h5>
        <div class="mb-3">
          <label for="cloneType" class="form-label">Primary Antibody Clone</label>
          <select class="form-select" id="cloneType">
            <option value="">Select</option>
            <option>Ready to use</option>
            <option>Concentrated</option>
          </select>
        </div>

        <!-- 2. Input: Lot No. -->
        <div class="mb-3">
          <label for="lotNumber" class="form-label">Lot No.</label>
          <input type="text" class="form-control" id="lotNumber" placeholder="Enter lot number">
        </div>

        <!-- 3. Input: Dilution Factor -->
        <div class="mb-3">
          <label for="dilutionFactor" class="form-label">Dilution Factor</label>
          <input type="text" class="form-control" id="dilutionFactor" placeholder="Enter dilution factor">
        </div>

        <!-- 4. Dropdown: Dilution Buffer -->
        <div class="mb-3">
          <label for="dilutionBuffer" class="form-label">Dilution Buffer</label>
          <select class="form-select" id="dilutionBuffer">
            <option value="">Select</option>
            <option>Biocare Medical  -Da Vinci Green Diluent</option>
            <option>Biocare Medical - Renoir Red Diluent</option>
            <option>Biocare Medical - Renaissance background reducing Diluent</option>
            <option>Biocare Medical - Van Gogh Yellow Diluent</option>
            <option>Cell Marque - Diamond - Antibody Diluent</option>
            <option>Cell Marque - Emeraid - Antibody Diluent</option>
            <option>Dako - Antibody Diluent</option>
            <option>Dako - Antibody Diluent with Background Reducing Components</option>
            <option>Dako - REAL Antibody Diluent</option>
            <option>Diagnostic Biosystem - Primary Antibody Diluent</option>
            <option>Immunologic - Bright Diluent,Green</option>
            <option>Leica - Bond Primary Antibody Diluent</option>
            <option>Ventana - Antibody Diluent</option>
            <option>Ventana - Antibody Diluent with casein</option>
            <option>Ventana - Antibody Diluent Buffer</option>
            <option>Zytomed - Antibody Diluent</option>
            <option>Others</option>
            <option>None</option>
          </select>
        </div>

        <!-- Show only if 'Others' is selected -->
        <div id="otherDilutionFields" class="d-none">
          <div class="mb-3">
            <label for="bufferName" class="form-label">Dilution Buffer Name</label>
            <input type="text" class="form-control" id="bufferName" placeholder="Enter buffer name">
          </div>
          <div class="mb-3">
            <label for="bufferProducer" class="form-label">Dilution Buffer Producer</label>
            <input type="text" class="form-control" id="bufferProducer" placeholder="Enter producer name">
          </div>
          <div class="mb-3">
            <label for="productNumber" class="form-label">Dilution Product Number</label>
            <input type="text" class="form-control" id="productNumber" placeholder="Enter product number">
          </div>
        </div>

        <!-- Always shown -->
        <div class="mb-3">
          <label for="incubationTime" class="form-label">Incubation Time (minutes)</label>
          <input type="number" class="form-control" id="incubationTime" placeholder="Enter time in minutes">
        </div>

        <div class="mb-3">
          <label for="incubationTemp" class="form-label">Incubation Temperature (°C)</label>
          <input type="number" class="form-control" id="incubationTemp" placeholder="Enter temperature in °C">
        </div>

        <div class="row g-3" id="hierSection">
          <h5 class="fw-semibold mt-3">Epitope Retrieval (HIER)</h5>
          <div class="mb-1">
            <select id="hierEnable" class="form-select">
              <option>Yes</option>
              <option>No</option>
            </select>
          </div>

          <!-- Details hidden when Epitope Retrieval = No -->
          <div class="col-12" id="hierDetails">
            <div class="row g-3 mt-0">

              <div class="col-md-6">
                <label for="hierDevice" class="form-label">Device</label>
                <select id="hierDevice" class="form-select">
                  <option value="">Select</option>
                  <option>On Board/On machine</option>
                  <option>PT Link /PT module</option>
                  <option>Microwave Oven</option>
                  <option>Pressure cooker</option>
                  <option>Water Bath</option>
                  <option>Pascal</option>
                  <option>Declocking chamber</option>
                  <option>Others (add specify)</option>
                </select>
              </div>

              <div class="col-md-6 d-none" id="hierDeviceOtherWrap">
                <label for="hierDeviceOther" class="form-label">Please specify device</label>
                <input id="hierDeviceOther" class="form-control" placeholder="Enter device">
              </div>

              <div class="col-md-6">
                <label for="hierBuffer" class="form-label">HIER Buffer</label>
                <select id="hierBuffer" class="form-select">
                  <option value="">Select</option>
                  <option>Std - Tris-EDTA pH9 (-)</option>
                  <option>Std - EDTA pH8 (-)</option>
                  <option>Std - Citrate pH6 (-)</option>
                  <option>Ventana - CC1</option>
                  <option>Ventana - CC2</option>
                  <option>Ventana Ultra CC1</option>
                  <option>Ventana Ultra CC2</option>
                  <option>Dako - TRS High pH</option>
                  <option>Dako - TRS Low pH</option>
                  <option>Dako - Citrate Low pH</option>
                  <option>Leica Bond Epitope Retrival Solution 1</option>
                  <option>Leica Bond Epitope Retrival Solution 2</option>
                  <option>Leica BOND - PRIME Epitope Retrival Solution 1</option>
                  <option>Leica BOND - PRIME Epitope Retreival Solution 2</option>
                  <option>Sakura -Tissue -Tek Genie High  pH</option>
                  <option>Sakura -Tissue -Tek Genie Citrate Antigen Retreival</option>
                  <option>Others,Then Specify</option>
                </select>
              </div>

              <div class="col-md-6 d-none" id="hierBufferOtherWrap">
                <label for="hierBufferOther" class="form-label">Buffer name (if Others)</label>
                <input id="hierBufferOther" class="form-control" placeholder="Enter buffer name">
              </div>

              <div class="col-md-6">
                <label for="hierTime" class="form-label">Efficient Heating Time (Minutes)</label>
                <input type="number" id="hierTime" class="form-control" placeholder="e.g., 20">
              </div>

              <div class="col-md-6">
                <label for="hierTemp" class="form-label">Max. heating temperature (Celcius)</label>
                <input type="number" id="hierTemp" class="form-control" placeholder="e.g., 97">
              </div>

            </div>
          </div>
        </div>


        <!-- Epitope Retrieval (Proteolysis) -->
        <div class="row g-3" id="proteolysisSection">
          <h5 class="fw-semibold mt-4">Epitope Retrieval (Proteolysis)</h5>
          <div class="mb-1">
            <select id="proteolysisEnable" class="form-select">
              <option>Yes</option>
              <option>No</option>
            </select>
          </div>

          <!-- Details hidden when proteolysis = No -->
          <div class="col-12" id="proteolysisDetails">
            <div class="row g-3 mt-0">

              <div class="col-md-6">
                <label for="proteolysisEnzyme" class="form-label">Proteolysis Enzyme</label>
                <select id="proteolysisEnzyme" class="form-select">
                  <option value="">Select</option>
                  <option>Dako - Pepsin</option>
                  <option>Dako - Proteinase K</option>
                  <option>Dako - Proteinase K, Ready-To-Use</option>
                  <option>Dako - Proteinase K, Dako Real</option>
                  <option>Dako - Proteolytic Enzyme, Ready-To-Use</option>
                  <option>Leica - Bond, Enzyme Pretreatment Kit</option>
                  <option>Ventana - Protease 1</option>
                  <option>Ventana - Protease 2</option>
                  <option>Ventana - Protease 3</option>
                  <option>Sakura - Tissue-Tek-enie Proteinase K</option>
                  <option>Others (add specify)</option>
                </select>
              </div>

              <div class="col-md-6 d-none" id="proteolysisEnzymeOtherWrap">
                <label for="proteolysisEnzymeOther" class="form-label">Please specify enzyme</label>
                <input id="proteolysisEnzymeOther" class="form-control" placeholder="Enter Enzyme Name">
              </div>

            

              <div class="col-md-6">
                <label for="proteolysisTime" class="form-label">Proteolysis Time (Minutes)</label>
                <input type="number" id="proteolysisTime" class="form-control" placeholder="e.g., 20">
              </div>

              <div class="col-md-6">
                <label for="proteolysisTemp" class="form-label">Proteolysis temperature (Celcius)</label>
                <input type="number" id="proteolysisTemp" class="form-control" placeholder="e.g., 97">
              </div>

              <div class="col-md-6">
                <label for="proteolysisheatingtime" class="form-label">Heating Time (Minutes)</label>
                <input type="number" id="proteolysisheatingtime" class="form-control" placeholder="e.g., 20">
              </div>

              <div class="col-md-6">
                <label for="proteolysisheatingtemp" class="form-label">Heating temperature (Celcius)</label>
                <input type="number" id="proteolysisheatingtemp" class="form-control" placeholder="e.g., 97">
              </div>

            </div>
          </div>
        </div>

        
        <h5 class="fw-semibold mt-3">Visualization Systm</h5>

        <div id="vizAuto" class="row g-3">
          <div class="mb-3">
            <label for="vizSystemAuto" class="form-label">Visualization System</label>
            <select id="vizSystemAuto" class="form-select">
              <option value="">Select</option>
              <option>OptiView DAB IHC Detection Kit</option>
              <option>UltraView Universal DAB Detection Kit</option>
              <option>UltraView Universal Alkaline Phosphated Red Detection Kit</option>
              <option>Iview DAB Detection kit</option>
              <option>EnVison+,Mouse</option>
              <option>EnVison+,Rabbit</option>
              <option>EnVision FLEX</option>
              <option>REAL Envision Rabbit/ Mouse</option>
              <option>Tissue - Tek Genie Pro Detection Kit DAB</option>
              <option>Tissue - Tek Genie Pro AP Red Detection Kit</option>
              <option>Bond Refine</option>
              <option>Bond Plymer Refine Red Detection</option>
              <option>BOND-PRIME Polymer DAB Detection System</option>
              <option>BOND-PRIME Polymer AP Detection System</option>
              <option>Others,Then Specify</option>
            </select>
          </div>
          <div class="mb-3 d-none" id="vizSystemAutoOtherWrap">
            <input id="vizSystemAutoOther" class="form-control" placeholder="Specify Visualization System">
          </div>

          <div class="mb-3">
            <label for="vizLinker" class="form-label">Linker</label>
            <select id="vizLinker" class="form-select">
              <option>Linker Mouse</option>
              <option>Linker Rabbit</option>
              <option>None</option>
              <option>Others,Then Specify</option>
            </select>
          </div>
          <div class="mb-3 d-none" id="vizLinkerOtherWrap">
            <input id="vizLinkerOther" class="form-control" placeholder="Specify Linker">
          </div>

          <div class="mb-3">
            <label for="vizAmplification" class="form-label">Amplification</label>
            <select id="vizAmplification" class="form-select">
              <option>OptiView Amplification Kit</option>
              <option>UltraView/iView Amplification Kit</option>
              <option>None</option>
              <option>Others,Then Specify</option>
            </select>
          </div>
          <div class="mb-3 d-none" id="vizAmplificationOtherWrap">
            <input id="vizAmplificationOther" class="form-control" placeholder="Specify Amplification">
          </div>

          <div class="row g-3">
            <div class="col-md-4"><input id="ampName" class="form-control" placeholder="Amplification Name"></div>
            <div class="col-md-4"><input id="ampProducer" class="form-control" placeholder="Amplification Producer"></div>
            <div class="col-md-4"><input id="ampProductNumber" class="form-control" placeholder="Amplification Product Number"></div>
            <div class="col-md-4"><input id="incubationLinker" type="number" class="form-control" placeholder="Incubation Time linker (min)"></div>
            <div class="col-md-4"><input id="incubationAmplification" type="number" class="form-control" placeholder="Incubation Time amplification (min)"></div>
            <div class="col-md-4"><input id="incubationPolymer" type="number" class="form-control" placeholder="Incubation Time polymer (min)"></div>
            <div class="col-md-4"><input id="incubationTempPolymer" type="number" class="form-control" placeholder="Incubation Temperature (°C)"></div>
          </div>
        </div>

        <!-- Manual/Others -->
        <div id="vizManual" class="d-none">
          <div class="mb-3">
            <label for="vizMethod" class="form-label">Method</label>
            <select id="vizMethod" class="form-select">
              <option>2- Layer Technique</option>
              <option>3- Layer Technique</option>
              <option>Biotin-Based</option>
              <option>None</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="vizSystemManual" class="form-label">Visualization System - Name</label>
            <select id="vizSystemManual" class="form-select">
              <option>OptiView DAB IHC Detection Kit</option>
              <option>UltraView Universal DAB Detection Kit</option>
              <option>UltraView Universal Alkaline Phosphated Red Detection Kit</option>
              <option>Iview DAB Detection kit</option>
              <option>EnVison+,Mouse</option>
              <option>EnVison+,Rabbit</option>
              <option>EnVision FLEX</option>
              <option>REAL Envision Rabbit/ Mouse</option>
              <option>Tissue - Tek Genie Pro Detection Kit DAB</option>
              <option>Tissue - Tek Genie Pro AP Red Detection Kit</option>
              <option>Bond Refine</option>
              <option>Bond Plymer Refine Red Detection</option>
              <option>BOND-PRIME Polymer DAB Detection System</option>
              <option>BOND-PRIME Polymer AP Detection System</option>
              <option>Others,Then Specify</option>
            </select>
          </div>
          <div class="mb-3 d-none" id="vizSystemManualOtherWrap">
            <input id="vizSystemManualOther" class="form-control" placeholder="Specify Visualization System">
          </div>

          <div class="mb-3">
            <label for="vizProducer" class="form-label">Visualization System - Producer</label>
            <select id="vizProducer" class="form-select">
              <option>DAB UV KITS</option>
              <option>DAB OV KITS</option>
              <option>DAKO FLEX KITS</option>
              <option>Other (please specify)</option>
            </select>
          </div>
          <div class="mb-3 d-none" id="vizProducerOtherWrap">
            <input id="vizProducerOther" class="form-control" placeholder="Specify Producer">
          </div>

          <div class="row g-3">
            <div class="col-md-4"><input id="vizProductNumber" class="form-control" placeholder="Visualization System - Product Number"></div>
            <div class="col-md-4"><input id="vizIncubationTime" type="number" class="form-control" placeholder="Incubation Time (min)"></div>
            <div class="col-md-4"><input id="vizIncubationTemp" type="number" class="form-control" placeholder="Incubation Temperature (°C)"></div>
          </div>
        </div>

        <h5 class="fw-semibold mt-3">Chromogen</h5>
          <div id="chromogen" class="row g-3">
            <div class="mb-3">
              <label for="chromotype" class="form-label">Chromogen</label>
              <select id="chromotype" class="form-select">
                <option value="">Select</option>
                <option>DAB</option>
                <option>Dako-HRP Magenta Substrate Chromogen System</option>
                <option>UltraView DAB Detection kit</option>
                <option>UltraView/iView Amplification Kit </option>
                <option>OptiView Amplification Kit</option>
                <option>Others,Then Specify</option>
              </select>
            </div>
          </div>
          <div class="row g-3 d-none" id="chromoOtherWrap">
            <div class="col-md-6">
              <input id="chromoName" class="form-control" placeholder="Chromogen Name">
            </div>
            <div class="col-md-6">
              <input id="chromoProducer" class="form-control" placeholder="Chromogen Producer">
            </div>
            <div class="col-md-6">
              <input id="chromoProductNumber" class="form-control" placeholder="Chromogen Product Number">
            </div>
            <div class="col-md-6">
              <input id="chromoTime" type="number" class="form-control" placeholder="Incubation Time (minutes)">
            </div>
            <div class="col-md-6">
              <input id="chromoTemp" type="number" class="form-control" placeholder="Incubation Temperature (°C)">
            </div>
          </div>  

        

        <h5 class="fw-semibold mt-3">Enhancement</h5>
        <div id="enhancementSection" class="row g-3">
          <div class="mb-3">
            <label for="enhancementSelect" class="form-label">Enhancement</label>
            <select id="enhancementSelect" class="form-select">
              <option value="">Select</option>
              <option>CuSO4</option>
              <option>Others</option>
              <option>None</option>
            </select>
          </div>

          <!-- Only shown when Enhancement = Others -->
          <div class="col-md-6 d-none" id="enhanceOtherWrap">
            <label for="enhanceOther" class="form-label">Enhancement (others)</label>
            <input id="enhanceOther" class="form-control" placeholder="Please Specify">
          </div>
        </div>

        <h5 class="fw-semibold mt-3">Scoring</h5>
        <div id="scoringSection" class="row g-3">
          <div class="mb-3">
            <select id="scoringSelect" class="form-select">
              <option value="">Select</option>
              <option>ALLRED Score</option>
              <option>H-Score</option>
            </select>
          </div>
        </div>  
        

        <h5 class="fw-semibold mt-3">Comments (Tissues provided as control)</h5>
        <div style="max-width: 500px; width: 100%;">
          <textarea id="comments" class="form-control" rows="3" placeholder="Comments added by participants.."></textarea>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="resultModal" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" style="max-width: 900px;">
    <div class="modal-content p-0" style="border-radius: 12px; overflow: hidden;">
      
      <!-- Dark Blue Header with Close Button -->
      <div class="d-flex justify-content-between align-items-center" style="background-color: #2f3e63; color: white; padding: 14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="resultModalLabel">Enter Results</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width: 18%;">Core No.</th>
                <th style="width: 28%;">Participant Score</th>
                <th style="width: 18%;">Ideal Score</th>
                <th style="width: 18%;">EQAS Score</th>
                <th style="width: 18%;">DOA</th>
              </tr>
            </thead>
            <tbody id="resultRows"></tbody>
          </table>
        </div>
      </div>

      <!-- Extra Section: Total Score + Comment -->
      <div class="mt-4 d-flex flex-column align-items-center text-center">

        <!-- Total Score -->
        <div class="mb-3" style="max-width: 280px; width: 100%;">
          <label for="scoreObtained" class="fw-semibold mb-1 d-block">Total Score:</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained" class="form-control form-control-sm text-end score-input"
                  min="0" step="1" value="0" aria-label="Score obtained">
            <span class="input-group-text">/</span>
            <input type="number" id="scoreTotal" class="form-control form-control-sm score-input"
                  min="0" step="1" value="0" aria-label="Total score">
          </div>
        </div>

        <!-- Comment -->
        <div style="max-width: 500px; width: 100%;">
          <label for="comment" class="fw-semibold mb-1 d-block">Comment:</label>
          <textarea id="comment" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
        </div>

      </div>


      <!-- Footer -->
      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>

    </div>
  </div>
</div>

<!-- ===== ER Modal ===== -->
<div class="modal fade enter-result-modal" id="modal-ER" data-sub="ER" tabindex="-1" aria-labelledby="label-ER" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:900px;">
    <div class="modal-content p-0" style="border-radius:12px; overflow:hidden;">
      <div class="d-flex justify-content-between align-items-center" style="background:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="label-ER">Enter Results – ER</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width:18%;">Core No.</th>
                <th style="width:28%;">Participant Score</th>
                <th style="width:18%;">EQAS Score</th>
                <th style="width:18%;">Ideal Score</th>               
                <th style="width:18%;">DOA</th>
              </tr>
            </thead>
            <tbody id="rows-ER">
              <tr>
              <td>Core 1</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 2</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 3</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 4</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>                                    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 5</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 6</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 7</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">                    
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 8</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 9</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 10</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 11</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select"> 
                        <option>Select</option>       
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">     
                        <option>Select</option>   
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">     
                        <option>Select</option>   
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 12</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">    
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">    
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">      
                        <option>Select</option>  
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="mt-4 d-flex flex-column align-items-center text-center pb-2">
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-ER">Total Score (Good):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-ER" class="form-control form-control-sm text-end score-input">
          </div>
        </div>
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-ER">Total Score (Fair):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-ER" class="form-control form-control-sm text-end score-input">
          </div>
        </div>
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-ER">Total Score (Poor):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-ER" class="form-control form-control-sm text-end score-input">
          </div>
        </div>

        <div style="max-width:500px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="comment-ER">Comment:</label>
          <textarea id="comment-ER" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
        </div>
      </div>

      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary btn-save" data-sub="ER">Save</button>
        <button type="button" class="btn btn-primary btn-submit" data-sub="ER">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== PR Modal ===== (IDs & data-sub changed) -->
<div class="modal fade enter-result-modal" id="modal-PR" data-sub="PR" tabindex="-1" aria-labelledby="label-PR" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:900px;">
    <div class="modal-content p-0" style="border-radius:12px; overflow:hidden;">
      <div class="d-flex justify-content-between align-items-center" style="background:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="label-ER">Enter Results – PR</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width:18%;">Core No.</th>
                <th style="width:28%;">Participant Score</th>
                <th style="width:18%;">EQAS Score</th>
                <th style="width:18%;">Ideal Score</th>               
                <th style="width:18%;">DOA</th>
              </tr>
            </thead>
            <tbody id="rows-PR">
              <tr>
              <td>Core 1</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 2</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 3</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>             
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 4</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>                                    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 5</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 6</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 7</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">                    
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 8</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 9</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 10</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 11</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select"> 
                        <option>Select</option>       
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">     
                        <option>Select</option>   
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">     
                        <option>Select</option>   
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 12</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">    
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Select</option>
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">    
                        <option>Select</option>    
                        <option>Negative</option>
                        <option>3/8</option>
                        <option>4/8</option>
                        <option>5/8</option>
                        <option>6/8</option>
                        <option>7/8</option>
                        <option>8/8</option>
                        <option>Lymph Node</option>
                        <option>Control</option>
                        <option>Blank</option>
                        <option>Others</option>
                        <option>Negative or 3/8</option>
                        <option>3/8 or 4/8</option>
                        <option>4/8 or 5/8</option>
                        <option>5/8 or 6/8</option>
                        <option>6/8 or 7/8</option>
                        <option>7/8 or 8/8</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">      
                        <option>Select</option>  
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Poor</option>
                        <option>Educational Challenge</option>
                        <option>Tissue Depleted</option>
                        <option>Uninterpretable</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="mt-4 d-flex flex-column align-items-center text-center pb-2">
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-PR">Total Score (Good):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-PR" class="form-control form-control-sm text-end score-input">
          </div>
        </div>
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-PR">Total Score (Fair):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-PR" class="form-control form-control-sm text-end score-input">
          </div>
        </div>
        <div class="mb-3" style="max-width:280px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="scoreObtained-PR">Total Score (Poor):</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained-PR" class="form-control form-control-sm text-end score-input">
          </div>
        </div>

        <div style="max-width:500px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="comment-PR">Comment:</label>
          <textarea id="comment-PR" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
        </div>
      </div>

      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary btn-save" data-sub="PR">Save</button>
        <button type="button" class="btn btn-primary btn-submit" data-sub="R">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== HER2/Neu ===== -->
<div class="modal fade enter-result-modal" id="modal-HER2" data-sub="HER2" tabindex="-1" aria-labelledby="label-HER2" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:900px;">
    <div class="modal-content p-0" style="border-radius:12px; overflow:hidden;">
      <div class="d-flex justify-content-between align-items-center" style="background:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="label-ER">Enter Results – Her2/Neu</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width:18%;">Core No.</th>
                <th style="width:28%;">Participant Score</th>
                <th style="width:18%;">EQAS Score</th>
                <th style="width:18%;">Ideal Score</th>               
                <th style="width:18%;">Concordance</th>
              </tr>
            </thead>
            <tbody id="rows-HER2">
              <tr>
              <td>Core 1</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 2</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 3</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 4</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 5</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 6</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 7</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 8</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 9</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 10</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 11</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 12</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Negative 0</option>
                        <option>Negative 1+</option>
                        <option>Equivocal 2+</option>
                        <option>Positive 3+</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>Tissue Depleted</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="mt-4 d-flex flex-column align-items-center text-center pb-2">
        <div style="max-width:500px; width:100%;">
          <label class="fw-semibold mb-1 d-block" for="comment-PR">Comment:</label>
          <textarea id="comment-PR" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
        </div>
      </div>

      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary btn-save" data-sub="PR">Save</button>
        <button type="button" class="btn btn-primary btn-submit" data-sub="PR">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== Lymphoma ===== -->
<div class="modal fade enter-result-modal" id="modal-LYM" data-sub="LYM" tabindex="-1" aria-labelledby="label-LYM" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:900px;">
    <div class="modal-content p-0" style="border-radius:12px; overflow:hidden;">
      <div class="d-flex justify-content-between align-items-center" style="background:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="label-LYM">Enter Results – Lymphoma</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width:18%;">Core No.</th>
                <th style="width:18%;">Questionnaire</th>
                <th style="width:28%;">Participant Score</th>
                <th style="width:18%;">EQAS Score</th>
                <th style="width:18%;">Ideal Score</th>               
                <th style="width:18%;">Concordance</th>
              </tr>
            </thead>
            <tbody id="rows-LYM">
              <tr>
              <td>Core 1</td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 2</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 3</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 4</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 5</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 6</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 7</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 8</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 9</td>              
             <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 10</td>              
             <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 11</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 12</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <div class="mb-3" style="max-width: 420px; width: 100%; text-align: center;">
          <!-- Title -->
          <label class="fw-semibold mb-2 d-block">Total Score</label>

          <!-- Test Pass Rate row -->
          <div class="input-group mb-2">
            <span class="input-group-text">Test Pass Rate</span>
            <input type="number" class="form-control form-control-sm text-end" min="0" step="1" value="0">
            <span class="input-group-text">/</span>
            <input type="number" class="form-control form-control-sm text-end" min="0" step="1" value="0">
            <span class="input-group-text">Results Concordant</span>
          </div>

          <!-- Pass Rate row -->
          <div class="input-group justify-content-center">
            <span class="input-group-text">Pass Rate</span>
            <input type="number" class="form-control form-control-sm text-end"
                  style="max-width: 80px;" min="0" step="1" value="0">
            <span class="input-group-text">%</span>
          </div>

          <div style="max-width:500px; width:100%;">
            <label class="fw-semibold mb-1 d-block" for="comment-PR">Comment:</label>
            <textarea id="comment-PR" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
          </div>
        </div>
      </div>

      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary btn-save" data-sub="LYM">Save</button>
        <button type="button" class="btn btn-primary btn-submit" data-sub="LYM">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== Miscellaneous ===== -->
<div class="modal fade enter-result-modal" id="modal-MISC" data-sub="MISC" tabindex="-1" aria-labelledby="label-MISC" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:900px;">
    <div class="modal-content p-0" style="border-radius:12px; overflow:hidden;">
      <div class="d-flex justify-content-between align-items-center" style="background:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="label-LYM">Enter Results – Miscellaneous</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width:18%;">Core No.</th>
                <th style="width:18%;">Questionnaire</th>
                <th style="width:28%;">Participant Score</th>
                <th style="width:18%;">EQAS Score</th>
                <th style="width:18%;">Ideal Score</th>               
                <th style="width:18%;">Concordance</th>
              </tr>
            </thead>
            <tbody id="rows-MISC">
              <tr>
              <td>Core 1</td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 2</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 3</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 4</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 5</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 6</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 7</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 8</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 9</td>              
             <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 10</td>              
             <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 11</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            <tr>
              <td>Core 12</td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Interpret in Predominant Population of Cells</option>
                        <option>Interpret in Large Cells</option>
                        <option>Interpret in Tumor Cells</option>
                        <option>Interpret in Abnormal Cells</option>
                        <option>Lymph Node</option>
                        <option>Blank</option>
                        <option>Others</option>
                  </select>
              </td>              
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>        
                        <option>Positive</option>
                        <option>Focal Positive</option>
                        <option>Strong Diffuse Positive</option>
                        <option>Negative</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Lymph node</option>
                        <option>Blank</option>
                        <option>Control</option>
                        <option>Others</option>
                  </select>
              </td>
              <td class = "select" ALIGN="center">      
                  <select class="form-select">
                        <option>Select</option>         
                        <option>Concordant</option>
                        <option>Discordant</option>                       
                        <option>Educational Challenge</option>
                        <option>Uninterpretable</option>
                        <option>No Tumor</option>
                        <option>Blank</option>
                        <option>Lymph Node</option>
                        <option>Others</option>
                  </select>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <div class="mb-3" style="max-width: 420px; width: 100%; text-align: center;">
          <!-- Title -->
          <label class="fw-semibold mb-2 d-block">Total Score</label>

          <!-- Test Pass Rate row -->
          <div class="input-group mb-2">
            <span class="input-group-text">Test Pass Rate</span>
            <input type="number" class="form-control form-control-sm text-end" min="0" step="1" value="0">
            <span class="input-group-text">/</span>
            <input type="number" class="form-control form-control-sm text-end" min="0" step="1" value="0">
            <span class="input-group-text">Results Concordant</span>
          </div>

          <!-- Pass Rate row -->
          <div class="input-group justify-content-center">
            <span class="input-group-text">Pass Rate</span>
            <input type="number" class="form-control form-control-sm text-end"
                  style="max-width: 80px;" min="0" step="1" value="0">
            <span class="input-group-text">%</span>
          </div>
          <div style="max-width:500px; width:100%;">
            <label class="fw-semibold mb-1 d-block" for="comment-PR">Comment:</label>
            <textarea id="comment-PR" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
          </div>
        </div>
      </div>

      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary btn-save" data-sub="LYM">Save</button>
        <button type="button" class="btn btn-primary btn-submit" data-sub="LYM">Submit</button>
      </div>
    </div>
  </div>
</div>








<div class="modal fade" id="resultModal1" tabindex="-1" aria-labelledby="resultModalLabel1" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" style="max-width: 900px;">
    <div class="modal-content p-0" style="border-radius: 12px; overflow: hidden;">
      
      <!-- Dark Blue Header with Close Button -->
      <div class="d-flex justify-content-between align-items-center" style="background-color: #2f3e63; color: white; padding: 14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="resultModalLabel1">Enter Results</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width: 18%;">Core No.</th>
                <th style="width: 18%;">Ideal Score</th>
                <th style="width: 18%;">EQAS Score</th>
                <th style="width: 18%;">DOA</th>
              </tr>
            </thead>
            <tbody id="resultRows1"></tbody>
          </table>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="heresultModaldigital" tabindex="-1" aria-labelledby="heresultModaldigitalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" style="max-width: 900px;">
    <div class="modal-content p-0" style="border-radius: 12px; overflow: hidden;">
      
      <!-- Dark Blue Header with Close Button -->
      <div class="d-flex justify-content-between align-items-center" style="background-color: #2f3e63; color: white; padding: 14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="resultModalLabel">Enter Results</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body bg-white px-4 py-3">
        <div class="table-responsive">
          <table class="table table-bordered align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th style="width: 25%; text-align: center;">Case No.</th>
                <th style="width: 25%; text-align: center;">NCG EQAS Diagnosis</th>
                <th style="width: 25%; text-align: center;">Participant Diagnosis</th>                
                <th style="width: 25%; text-align: center;">Concordance</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="width: 25%; text-align: center;">Case 1</td>
                <td>Protrusion of glomerular cells</td>
                <td>Protrusion of gomerular cells</td>
                <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Concordant</option>
                        <option>Discordant</option>
                        <option>Partly Concordant</option>
                        <option>Educational Challenge</option>
                        <option>Others</option>
                  </select>
                </td> 
              </tr>
              <tr>
                <td style="width: 25%; text-align: center;">Case 2</td>
                <td>EMT for islets of langerhan cells</td>
                <td>EMT for islets of langerhan cells</td>
                <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Concordant</option>
                        <option>Discordant</option>
                        <option>Partly Concordant</option>
                        <option>Educational Challenge</option>
                        <option>Others</option>
                  </select>
                </td> 
              </tr>
               <tr>
                <td style="width: 25%; text-align: center;">Case 3</td>
                <td>Metastasis in the mesenchymal lining</td>
                <td>Metastasis in the epithelial lining</td>
                <td class = "select" ALIGN="center">      
                  <select class="form-select">        
                        <option>Concordant</option>
                        <option>Discordant</option>
                        <option>Partly Concordant</option>
                        <option>Educational Challenge</option>
                        <option>Others</option>
                  </select>
                </td> 
              </tr>
            </tbody>
          </table>
        </div>
        <div class="mt-4 d-flex flex-column align-items-center text-center">

        <!-- Total Score -->
        <div class="mb-3" style="max-width: 280px; width: 100%;">
          <label for="scoreObtained" class="fw-semibold mb-1 d-block">Total Score:</label>
          <div class="input-group justify-content-center">
            <input type="number" id="scoreObtained" class="form-control form-control-sm text-end score-input"
                  min="0" step="1" value="0" aria-label="Score obtained">
            <span class="input-group-text">/</span>
            <input type="number" id="scoreTotal" class="form-control form-control-sm score-input"
                  min="0" step="1" value="0" aria-label="Total score">
          </div>
        </div>

        <!-- Comment -->
        <div style="max-width: 500px; width: 100%;">
          <label for="comment" class="fw-semibold mb-1 d-block">Comment:</label>
          <textarea id="comment" class="form-control" rows="3" placeholder="Enter your comment here..."></textarea>
        </div>

      </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary">Submit</button>
      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="heresultModalmdsr" tabindex="-1" aria-labelledby="heresultModalmdsrLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" style="max-width: 900px;">
    <div class="modal-content p-0" style="border-radius: 12px; overflow: hidden;">

      <!-- Header -->
      <div class="d-flex justify-content-between align-items-center" style="background-color:#2f3e63;color:#fff;padding:14px 20px;">
        <h4 class="modal-title mb-0 fw-semibold" id="heresultModalmdsrLabel">Enter Results</h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Body with Tabs -->
      <div class="modal-body bg-white px-4 py-3">

        <!-- Tabs -->
        <ul class="nav nav-tabs" id="resultTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="tab-form-tab" data-bs-toggle="tab" data-bs-target="#tab-form" type="button" role="tab" aria-controls="tab-form" aria-selected="true">
              Participant Report
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab-table-tab" data-bs-toggle="tab" data-bs-target="#tab-table" type="button" role="tab" aria-controls="tab-table" aria-selected="false">
              Add Results
            </button>
          </li>
        </ul>

        <div class="tab-content pt-3" id="resultTabsContent">
          <!-- Tab 1: your existing form -->
          <div class="tab-pane fade show active" id="tab-form" role="tabpanel" aria-labelledby="tab-form-tab">
            <form id="narrativeForm">
              <!-- Run No (fixed) -->
              <div class="mb-3">
                <label for="runNo" class="form-label fw-semibold">Run No.</label>
                <input type="text" id="runNo" class="form-control" value="27" readonly>
              </div>

              <!-- Microscopic Description -->
              <div class="mb-3">
                <label for="microscopicDesc" class="form-label fw-semibold">Microscopic Description</label>
                <textarea id="microscopicDesc" class="form-control" rows="6">Sections show multiple fragments of tan-pink tissue composed of nests and cords of atypical epithelial cells infiltrating a fibrous stroma. The cells display moderate pleomorphism with vesicular chromatin and conspicuous nucleoli, with variable eosinophilic cytoplasm. Mitotic activity is brisk with occasional atypical forms; foci of comedo-type necrosis are identified. The intervening stroma is desmoplastic with scattered lymphoplasmacytic infiltrates and focal hemorrhage. Areas of surface ulceration are noted. No granulomas or fungal profiles are seen in the examined levels.</textarea>
              </div>

              <!-- Describe Lesion -->
              <div class="mb-3">
                <label for="describe" class="form-label fw-semibold">Describe Lesion</label>
                <textarea id="describe" class="form-control" rows="5">Grossly described as an ill-defined, firm, grey-white nodule measuring approximately 2.3 cm with indistinct borders. On sections, the lesion is irregular and infiltrative, extending between adjacent structures with focal perineural wrapping. Foci of necrosis and microcalcification are present with patchy intratumoral hemorrhage. Tumor approaches the inked deep margin in multiple levels, the closest distance being &lt;1 mm.</textarea>
              </div>

              <!-- Comments -->
              <div class="mb-3">
                <label for="comments" class="form-label fw-semibold">Comments (if any)</label>
                <textarea id="comments" class="form-control" rows="4">Correlation with imaging and clinical context is recommended. Ancillary studies may assist in subtyping and therapeutic stratification; suggested panel includes pan-cytokeratin, p63/p40, Ki-67, CK7/CK20, and site-specific markers as appropriate. If clinically relevant, HPV or EBER testing may be considered.</textarea>
              </div>

              <!-- Diagnosis (long) -->
              <div class="mb-3">
                <label for="diagnosis" class="form-label fw-semibold">Diagnosis</label>
                <textarea id="diagnosis" class="form-control" rows="14">Biopsy, site unspecified — Infiltrating carcinoma, favor keratinizing squamous cell carcinoma, moderately differentiated (grade 2/3).

          The tumor is composed of invasive nests and sheets of atypical squamous cells with intercellular bridges and focal keratin pearl formation. Nuclear pleomorphism is moderate to marked with irregular nuclear contours and prominent nucleoli. The mitotic index is elevated (up to high-power fields examined), including atypical mitoses. Geographic tumor necrosis is present.

          Lymphovascular invasion is identified in multiple foci. Perineural invasion is present, involving small to medium-caliber nerves with partial circumferential encasement. Tumor extends to within 0.5 mm of the deep (inked) margin in the submitted levels; other margins are free of invasive carcinoma in the examined material. Background mucosa shows chronic active inflammation with focal epithelial dysplasia.

          No definitive glandular differentiation or neuroendocrine morphology is seen on hematoxylin-eosin sections. Based on morphology alone, findings support a keratinizing squamous cell carcinoma, moderately differentiated. Correlation with radiologic studies is advised to assess the full extent of disease. Immunohistochemistry (if not already performed) for p40, p63 and pan-cytokeratin may be used to support squamous differentiation; Ki-67 can aid in proliferation assessment. Programmed death-ligand 1 (PD-L1) and pathogen-specific testing (e.g., HPV by in situ hybridization) may be performed if clinically indicated. Final classification and any staging considerations should integrate clinical, imaging and ancillary study results.</textarea>
              </div>
            </form>
          </div>


          

          <!-- Tab 2: table with inputs -->
          <div class="tab-pane fade" id="tab-table" role="tabpanel" aria-labelledby="tab-table-tab">
            <div class="table-responsive">
              <table class="table table-sm table-bordered align-middle mb-0" id="mdsrTable">
                <thead class="table-light">
                  <tr>
                    <th style="width:70px;">Sr. No.</th>
                    <th>Minimum Data Set Reporting Points</th>
                    <th>Report Expected</th>
                    <th>Reported by Participant</th>
                    <th>Correctly reported</th>
                    <th style="width:120px;">Points</th>
                  </tr>
                </thead>
                <tbody></tbody>
                <tfoot class="table-light">
                  <tr>
                    <th colspan="5" class="text-end">Total Points</th>
                    <th><span id="pointsTotal">0.0</span></th>
                  </tr>
                </tfoot>
              </table>
              <!-- Summary under the table -->
              <div class="mt-3">
                <table class="table table-sm table-bordered align-middle mb-0" id="mdsrSummary">
                  <tbody>
                    <tr>
                      <th style="width: 40%;">Histologic Diagnosis (Drop Down)</th>
                      <td>
                        <select id="histologicDx" class="form-select form-select-sm">
                          <option value="">Choose...</option>
                          <option value="Concordant">Concordant</option>
                          <option value="Discordance">Discordant</option>
                          <option value="Partly Concordant">Partly Concordant</option>
                        </select>
                      </td>
                    </tr>
                    <tr>
                      <th>Total number of points reported by center:</th>
                      <td>
                        <input id="pointsReportedByCenter" class="form-control form-control-sm" placeholder="Free Text">
                      </td>
                    </tr>
                    <tr>
                      <th>Points reported by center correctly:</th>
                      <td>
                        <input id="pointsReportedCorrectly" class="form-control form-control-sm" placeholder="Free Text">
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

            </div>
          </div>

        </div>

      </div>

      <!-- Footer -->
      <div class="modal-footer border-0 px-4 py-3">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>

        <!-- Back/Next switch tabs -->
        <button type="button" class="btn btn-outline-primary" id="backTabBtn" disabled>Back</button>
        <button type="button" class="btn btn-outline-primary" id="nextTabBtn">Next</button>

        <button type="button" class="btn btn-primary" id="saveBtn">Save</button>
        <button type="button" class="btn btn-success" id="submitBtn">Submit</button>
      </div>

    </div>
  </div>
</div>

<script>

  document.addEventListener('DOMContentLoaded', () => {
    const platformSelect = document.getElementById('stainingPlatform');
    const otherInputDiv = document.getElementById('otherStainingPlatformDiv');

    platformSelect.addEventListener('change', () => {
      if (platformSelect.value === 'Others') {
        otherInputDiv.classList.remove('d-none');
      } else {
        otherInputDiv.classList.add('d-none');
      }
    });
  });

  const firstRow = document.querySelector('#statusTableBody tr');
  if (firstRow) firstRow.classList.add('table-success');


  function renderReceiveHeader() {
    const th = document.getElementById('ihctableHeader');
    if (!th) return;
    th.innerHTML = `
      <tr>
        <th>Courier Name</th>
        <th>Run No</th>
        <th>Tracking ID</th>
        <th>Submodule</th>
        <th style="width:1%;white-space:nowrap;text-align:center">
          Date of Dispatch
        </th>
        <th style="width:1%;white-space:nowrap;text-align:center">
          Confirm Received
        </th>
      </tr>
    `;
  }
  
  function setActiveTab(el) {
    document.querySelectorAll('.bucket-tab')
            .forEach(t => t.classList.remove('active-tab'));
    el.classList.add('active-tab');

    const status = el.dataset.status;
    const th = document.getElementById('ihctableHeader');
    const stBody = document.getElementById('statusTableBody');
    const rBody = document.getElementById('receiveTableBody');
    const sBody = document.getElementById('sendTableBody');
    const repBody = document.getElementById('reportingTableBody');
    const allTable = document.getElementById('tableAll');

    // hide everything
    [stBody,rBody,sBody,repBody].forEach(b => b.style.display='none');
    allTable.style.display='none';

    if (status === 'status') {
      stBody.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th style="text-align:center">Year</th>
          <th style="text-align:center">Run No</th>
          <th style="text-align:center">Submodule</th>
          <th style="text-align:center">Current Status</th>
        </tr>
      `;
    }
    else if (status === 'recieve') {
      rBody.style.display = 'table-row-group';
      renderReceiveHeader();
    }
    else if (status === 'send') {
      sBody.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th>Courier Name</th>
          <th>Run No</th>
          <th>Tracking ID</th>
          <th>Submodule</th>
          <th style="width:1%;white-space:nowrap;text-align:center">
            Date of Dispatch
          </th>
          <th style="width:1%;white-space:nowrap;text-align:center">
            Confirm Sample Sent
          </th>
        </tr>
      `;
    }
    else if (status === 'reporting') {
      repBody.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th>Run No</th>
          <th>Submodule</th>
          <th>Date of Submission</th>
          <th style="text-align:center">View Protocol</th>
          <th style="text-align:center">Enter Results</th>
          <th class="text-center">View Report</th>
          <th class="text-center">Commit Report</th>
        </tr>
      `;
      return;
    }
    else if (status === 'all') {
      allTable.style.display = 'table';
      renderReceiveHeader();
    }
  }


  function setActiveTabHE(el) {
    // active tab styling only inside HE view
    document.querySelectorAll('#heView .bucket-tab').forEach(t => t.classList.remove('active-tab'));
    el.classList.add('active-tab');

    const th = document.getElementById('heTableHeader');

    // Hide all HE bodies
    ['heStatusTableBody','heExamineTableBody','heReportingTableBody']
      .forEach(id => { const b = document.getElementById(id); if (b) b.style.display = 'none'; });

    const map = {
      'he-status': {
        head: `
          <tr>
            <th class="text-center">Year</th>
            <th class="text-center">Run No</th>
            <th class="text-center">Batch</th>
            <th class="text-center">Submodule</th>
            <th class="text-center">Current Status</th>
          </tr>`,
        body: 'heStatusTableBody'
      },
      'he-examine': {
        head: `
          <tr>
            <th class="text-center">Batch No.</th>
            <th class="text-center">Link</th>
            <th class="text-center">Year</th>
            <th class="text-center">Sub-Module</th>
            <th class="text-center">Start Date</th>
            <th class="text-center">End Date</th>
            <th class="text-center">Login Details</th>
          </tr>`,
        body: 'heExamineTableBody'
      },
      'he-reporting': {
        head: `
          <tr>
            <th class="text-center">Run No</th>
            <th class="text-center">Submodule</th>
            <th class="text-center">Date of Submission</th>
            <th class="text-center">Batch No.</th>
            <th class="text-center">Enter Results</th>
            <th class="text-center">View Report</th>
            <th class="text-center">Commit Report</th>
          </tr>`,
        body: 'heReportingTableBody'
      }
    };

    const cfg = map[el.dataset.status];
    if (cfg) {
      th.innerHTML = cfg.head;
      document.getElementById(cfg.body).style.display = 'table-row-group';
    }
  }

  function setActiveTabTSP(el) {
    // active state within TSP view
    document.querySelectorAll('#tspView .bucket-tab').forEach(t => t.classList.remove('active-tab'));
    el.classList.add('active-tab');

    const th  = document.getElementById('tspTableHeader');
    const bSt = document.getElementById('tspStatusTableBody');
    const bRc = document.getElementById('tspReceiveTableBody');
    const bRp = document.getElementById('tspReportingTableBody');
    const bSd = document.getElementById('tspSendTableBody');

    [bSt, bRc, bRp, bSd].forEach(b => b.style.display = 'none');

    const status = el.dataset.status;
    if (status === 'tsp-status') {
      bSt.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th class="text-center">Year</th>
          <th class="text-center">Run No</th>
          <th class="text-center">Submodule</th>
          <th class="text-center">Current Status</th>
        </tr>`;
    } else if (status === 'tsp-receive') {
      bRc.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th>Courier Name</th>
          <th>Run No</th>
          <th>Tracking ID</th>
          <th>Submodule</th>
          <th style="width:1%;white-space:nowrap;text-align:center">Date of Dispatch</th>
          <th style="width:1%;white-space:nowrap;text-align:center">Confirm Received</th>
        </tr>`;
    } else if (status === 'tsp-reporting') {
      bRp.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th>Run No</th>
          <th>Submodule</th>
          <th>Last Date of Submission</th>
          <th style="text-align:center">View Protocol</th>
          <th style="text-align:center">Enter Results</th>
          <th class="text-center">View Report</th>
          <th class="text-center">Commit Report</th>
        </tr>`;
    } else if (status === 'tsp-send') {
      bSd.style.display = 'table-row-group';
      th.innerHTML = `
        <tr>
          <th>Courier Name</th>
          <th>Run No</th>
          <th>Tracking ID</th>
          <th>Submodule</th>
          <th style="width:1%;white-space:nowrap;text-align:center">Date of Dispatch</th>
          <th style="width:1%;white-space:nowrap;text-align:center">Confirm Sample Sent</th>
        </tr>`;
    }
  }


  function confirmReceive(button) {
  const row = button.closest('tr');
  const courierCell = row.querySelector('.courier-cell');
  const trackingCell = row.querySelector('.tracking-cell');

  const isSendTab =
    document.querySelector('.bucket-tab.active-tab')?.dataset.status === 'send';

  // Pull values (inputs in Send, text in Receive)
  const courier = isSendTab
    ? courierCell?.querySelector('input')?.value.trim()
    : courierCell?.textContent.trim();

  const trackingId = isSendTab
    ? trackingCell?.querySelector('input')?.value.trim()
    : trackingCell?.textContent.trim();

  const message = isSendTab
    ? 'Do you want to mark the sample as sent?'
    : `Do you want to mark the sample from "${courier}" (Tracking ID: ${trackingId}) as received?`;

  if (!confirm(message)) return;

  // RECEIVE tab behavior stays the same
  if (!isSendTab) {
    button.textContent = 'Received';
    button.classList.remove('btn-success');
    button.classList.add('btn-secondary');
    button.disabled = true;
    return;
  }

  // SEND tab behavior: mark as Sent and show refresh
  button.textContent = 'Sent';
  button.classList.remove('btn-success');
  button.classList.add('btn-secondary', 'btn-sent'); // marker class
  button.disabled = true;

  // Add a refresh button if not already present
  if (!row.querySelector('.btn-refresh')) {
    const refreshBtn = document.createElement('button');
    refreshBtn.type = 'button';
    refreshBtn.className = 'btn btn-outline-secondary btn-sm ms-2 btn-refresh';
    refreshBtn.title = 'Refresh to add new details';
    refreshBtn.innerHTML = '<i class="bi bi-arrow-clockwise"></i>';
    button.parentElement.appendChild(refreshBtn);
  }
}

// Delegated handler for refresh clicks (works for all rows)
document.addEventListener('click', (e) => {
  const refreshBtn = e.target.closest('.btn-refresh');
  if (!refreshBtn) return;

  const row = refreshBtn.closest('tr');
  const courierInput  = row.querySelector('.courier-cell input');
  const trackingInput = row.querySelector('.tracking-cell input');
  const confirmBtn    = row.querySelector('.btn-sent');

  // Clear inputs so new details can be entered
  if (courierInput)  courierInput.value  = '';
  if (trackingInput) trackingInput.value = '';

  // Restore confirm button to ✓ (green & enabled)
  if (confirmBtn) {
    confirmBtn.textContent = '✓';
    confirmBtn.classList.remove('btn-secondary', 'btn-sent');
    confirmBtn.classList.add('btn-success');
    confirmBtn.disabled = false;
  }

  // Remove the refresh button
  refreshBtn.remove();
});



  const scoreOptions = [
    "SELECT",
    "Negative 0",
    "Negative 1+",
    "Equivocal 2+",
    "Positive 3+",
    "Lymph node",
    "Blank",
    "Uninterpretable",
    "Tissue depleted",
    "Others, Then specify"
  ];
  const interpretationOptions = [
    "Concordance",
    "Discordance",
    "Concordance-i"
  ];

  function buildResultRows() {
    const tbody = document.getElementById('resultRows');
    if (!tbody) return;

    // Rebuild fresh every open
    tbody.innerHTML = '';

    // Options for random participant score (exclude "SELECT")
    const randomPool = scoreOptions.filter(o => o !== 'SELECT');

    for (let i = 1; i <= 12; i++) {
      const tr = document.createElement('tr');

      // Core
      const tdCore = document.createElement('td');
      tdCore.textContent = `Core ${i}`;
      tr.appendChild(tdCore);

      // Participant Score (value, not dropdown)
      const tdParticipant = document.createElement('td');
      const randVal = randomPool[Math.floor(Math.random() * randomPool.length)];
      // Use a read-only input for a "filled" look, or swap to plain text if you prefer
      const participantInput = document.createElement('input');
      participantInput.type = 'text';
      participantInput.className = 'form-control';
      participantInput.value = randVal;
      participantInput.readOnly = true; // locked look
      tdParticipant.appendChild(participantInput);
      tr.appendChild(tdParticipant);

      // Helper to build a select from an array of strings
      const makeSelect = (values) => {
        const sel = document.createElement('select');
        sel.className = 'form-select';
        values.forEach(v => {
          const o = document.createElement('option');
          o.value = v;
          o.textContent = v;
          sel.appendChild(o);
        });
        return sel;
      };

      // Ideal Score (dropdown)
      const tdIdeal = document.createElement('td');
      const idealSelect = makeSelect(scoreOptions);
      tdIdeal.appendChild(idealSelect);
      tr.appendChild(tdIdeal);

      // EQAS Score (dropdown)
      const tdEqas = document.createElement('td');
      const eqasSelect = makeSelect(scoreOptions);
      tdEqas.appendChild(eqasSelect);
      tr.appendChild(tdEqas);

      // Interpretation (dropdown)
      const tdInterp = document.createElement('td');
      const interpSelect = makeSelect(interpretationOptions);
      tdInterp.appendChild(interpSelect);
      tr.appendChild(tdInterp);

      tbody.appendChild(tr);
    }
  }
  function buildResultRowsTSP() {
    const tbody = document.getElementById('resultRows1'); // TSP modal body
    if (!tbody) return;
    tbody.innerHTML = '';

    const makeSelect = (values) => {
      const sel = document.createElement('select');
      sel.className = 'form-select';
      values.forEach(v => {
        const o = document.createElement('option');
        o.value = v;
        o.textContent = v;
        sel.appendChild(o);
      });
      return sel;
    };

    for (let i = 1; i <= 12; i++) {
      const tr = document.createElement('tr');

      const tdCore = document.createElement('td');
      tdCore.textContent = `Core ${i}`;
      tr.appendChild(tdCore);

      const tdIdeal = document.createElement('td');
      tdIdeal.appendChild(makeSelect(scoreOptions));
      tr.appendChild(tdIdeal);

      const tdEqas = document.createElement('td');
      tdEqas.appendChild(makeSelect(scoreOptions));
      tr.appendChild(tdEqas);

      const tdDOA = document.createElement('td');
      tdDOA.appendChild(makeSelect(interpretationOptions));
      tr.appendChild(tdDOA);

      tbody.appendChild(tr);
    }
  }



  // Build rows when the modal opens
  document.getElementById('resultModal')
    .addEventListener('shown.bs.modal', buildResultRows);

  window.addEventListener('DOMContentLoaded', () => {
    renderReceiveHeader();
    const def = document.querySelector('.bucket-tab[data-status="status"]');
    if (def) setActiveTab(def);
  });


  const moduleSelect = document.getElementById('moduleSelect');

  function applyModuleView() {
    const mod = document.getElementById('moduleSelect').value;

    const ihc = (mod === 'IHC');
    const tsp = (mod === 'TSP');
    const he  = (mod === 'H&E');

    document.getElementById('ihcView').style.display = ihc ? 'block' : 'none';
    document.getElementById('tspView').style.display = tsp ? 'block' : 'none';
    document.getElementById('heView').style.display  = he  ? 'block' : 'none';

    if (ihc) {
      const defIHC = document.querySelector('#ihcView .bucket-tab.active-tab') ||
                    document.querySelector('#ihcView .bucket-tab[data-status="status"]');
      if (defIHC) setActiveTab(defIHC);
    } else if (tsp) {
      const defTSP = document.querySelector('#tspView .bucket-tab.active-tab') ||
                    document.querySelector('#tspView .bucket-tab[data-status="tsp-status"]');
      if (defTSP) setActiveTabTSP(defTSP);
    } else if (he) {
      const defHE = document.querySelector('#heView .bucket-tab.active-tab') ||
                    document.querySelector('#heView .bucket-tab[data-status="he-status"]');
      if (defHE) setActiveTabHE(defHE);
    }
  }

  moduleSelect.addEventListener('change', applyModuleView);
  const tspModalEl = document.getElementById('resultModal1');
  if (tspModalEl) {
    tspModalEl.addEventListener('shown.bs.modal', buildResultRowsTSP);
    tspModalEl.addEventListener('hidden.bs.modal', () => {
      const tbody = document.getElementById('resultRows1');
      if (tbody) tbody.innerHTML = '';
    });
  }


  // initial view on load
  window.addEventListener('DOMContentLoaded', () => {
    applyModuleView(); // respects current dropdown selection
  });


  document.addEventListener("DOMContentLoaded", function () {

    // Function to replace select with input if "Others" selected
    function handleOthers(selectEl) {
      if (selectEl.value.toLowerCase() === "others") {
        // Create a text input
        const input = document.createElement("input");
        input.type = "text";
        input.className = selectEl.className;
        input.placeholder = "Enter value";
        input.value = ""; // blank by default
        input.name = selectEl.name; // preserve name if needed

        // Replace the select with the input
        selectEl.parentNode.replaceChild(input, selectEl);
      }
    }

    // Watch all selects inside your modals
    document.querySelectorAll(".modal select").forEach(select => {
      select.addEventListener("change", function () {
        handleOthers(this);
      });
    });

  });


  document.addEventListener("DOMContentLoaded", function () {
    // Which tbodies we should process
    const TARGET_TBODIES = ["rows-LYM", "rows-MISC"];

    // Header matchers (case-insensitive; tolerate the misspelling)
    const COL_MATCH = {
      participant: /participant\s*score/i,
      questionnaire: /(questionnaire|questionnare)/i
    };

    function randomizeAndLockCell(cell) {
      if (!cell) return;
      const sel = cell.querySelector("select");
      if (sel) {
        const options = Array.from(sel.options).filter(o =>
          (o.value ?? "").trim() !== "" && !/select/i.test(o.textContent)
        );
        if (options.length) {
          sel.value = options[Math.floor(Math.random() * options.length)].value;
        }
        sel.disabled = true;            // lock
        sel.classList.add("locked");    // optional styling
      } else {
        const inp = cell.querySelector("input");
        if (inp) {
          const min = inp.min !== "" ? Number(inp.min) : 0;
          const max = inp.max !== "" ? Number(inp.max) : 100;
          inp.value = Math.floor(Math.random() * (max - min + 1)) + min;
          inp.readOnly = true;
          inp.classList.add("locked");
        }
      }
    }

    function processTbody(tbodyId) {
      const tbody = document.getElementById(tbodyId);
      if (!tbody) return;
      const table = tbody.closest("table");
      if (!table) return;

      const ths = Array.from(table.querySelectorAll("thead th"));
      const pIdx  = ths.findIndex(th => COL_MATCH.participant.test(th.textContent.trim()));
      const qIdx  = ths.findIndex(th => COL_MATCH.questionnaire.test(th.textContent.trim()));

      // If columns exist, set random + lock for every row
      tbody.querySelectorAll("tr").forEach(tr => {
        if (pIdx >= 0) randomizeAndLockCell(tr.children[pIdx]);
        if (qIdx >= 0) randomizeAndLockCell(tr.children[qIdx]);
      });
    }

    // Run once on load (modals are in DOM even if hidden)
    TARGET_TBODIES.forEach(processTbody);

    // If you ever re-render rows dynamically, you can also re-run on modal show:
    document.querySelectorAll("#modal-LYM, #modal-MISC").forEach(modalEl => {
      modalEl.addEventListener("show.bs.modal", () => {
        // slight delay lets any dynamic row rendering finish
        setTimeout(() => TARGET_TBODIES.forEach(processTbody), 0);
      });
    });
  });





  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.enter-result-modal').forEach(modalEl => {
      modalEl.addEventListener('show.bs.modal', (ev) => {
        modalEl._openerBtn = ev.relatedTarget || null;
      });

      modalEl.querySelectorAll('.btn-submit').forEach(submitBtn => {
        submitBtn.addEventListener('click', () => {
          const opener = modalEl._openerBtn;
          if (opener) {
            // 1) Update the Enter Results button
            opener.innerHTML = '<i class="bi bi-check2-circle me-1"></i> Submitted';
            opener.classList.remove('btn-primary');
            opener.classList.add('btn-success');

            // 2) Show the edit button in the same row
            const row = opener.closest('tr');
            if (row) {
              const editBtn = row.querySelector('.btn-edit-report');
              if (editBtn) editBtn.style.display = 'inline-block';
            }
          }

          // 3) Close the modal
          const inst = bootstrap.Modal.getInstance(modalEl) || bootstrap.Modal.getOrCreateInstance(modalEl);
          inst.hide();
        });
      });
    });
  });

  function exportreport() {
    const a = document.createElement('a');
    a.href = './full_report.docx';   // relative to index.html
    a.download = 'full_report.xlsx';
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

</script>

<script>
  // Delegated events for the IHC reporting table
  const ihcReportingBody = document.getElementById('reportingTableBody');

  if (ihcReportingBody) {
    ihcReportingBody.addEventListener('click', (e) => {
      const editBtn = e.target.closest('.btn-edit-report');
      const viewBtn = e.target.closest('.btn-view-report');
      const commitBtn = e.target.closest('.btn-commit-report');
      const buildBtn = e.target.closest('.btn-build');
      // 1) Edit -> open the existing Enter Results modal


      // 2) View -> (placeholder) open a viewer or show a message for now
      if (viewBtn) {
        // Always open the same template file
        window.open('./full_report.pdf', '_blank');
        return;
      }

      // 3) Commit -> confirm then lock the button
      if (commitBtn) {
        const row = commitBtn.closest('tr');
        const run = row?.dataset.run || row?.children[0]?.textContent?.trim();
        const sub = row?.dataset.submodule || row?.children[1]?.textContent?.trim();

        const ok = confirm(`Do you want to commit the report for Run ${run} (${sub})?`);
        if (!ok) return;

        // Simulate commit success: update button state
        commitBtn.innerHTML = '<i class="bi bi-check2"></i> Committed';
        commitBtn.classList.remove('btn-success');
        commitBtn.classList.add('btn-secondary');
        commitBtn.disabled = true;

        // (Optional) also lock edit button after commit
        const siblingEdit = row.querySelector('.btn-edit-report');
        if (siblingEdit) {
          siblingEdit.classList.add('disabled');
          siblingEdit.disabled = true;
        }
      }

      if (buildBtn) {
        const row = buildBtn.closest('tr');
        const run = row?.dataset.run || row?.children[0]?.textContent?.trim();
        const sub = row?.dataset.submodule || row?.children[1]?.textContent?.trim();


        const ok = confirm(`Do you want to build the final report for Run ${run} (${sub})?`);
        if (!ok) return;

        buildBtn.innerHTML = '<i class="bi bi-check2"></i> Report Generated';
        buildBtn.classList.remove('btn-success');
        buildBtn.classList.add('btn-secondary');
        buildBtn.disabled = true;



      }

    

    });
  }

  const tspReportingBody = document.getElementById('tspReportingTableBody');

  if (tspReportingBody) {
    tspReportingBody.addEventListener('click', (e) => {
      const viewBtn = e.target.closest('.btn-view-report');
      const commitBtn = e.target.closest('.btn-commit-report');

      if (viewBtn) {
        window.open('assets/report.pdf', '_blank'); // single template
        return;
      }

      if (commitBtn) {
        const row = commitBtn.closest('tr');
        const run = row?.children[0]?.textContent?.trim();
        const sub = row?.children[1]?.textContent?.trim();

        if (!confirm(`Do you want to commit the report for Run ${run} (${sub})?`)) return;

        commitBtn.innerHTML = '<i class="bi bi-check2"></i> Committed';
        commitBtn.classList.remove('btn-success');
        commitBtn.classList.add('btn-secondary');
        commitBtn.disabled = true;

        const siblingEdit = row.querySelector('.btn-edit-report');
        if (siblingEdit) {
          siblingEdit.classList.add('disabled');
          siblingEdit.disabled = true;
        }
      }
    });
  }

  const heExamineBody = document.getElementById('heExamineTableBody');
  const loginModalEl  = document.getElementById('loginModal');

  if (heExamineBody && loginModalEl) {
    heExamineBody.addEventListener('click', (e) => {
      const btn = e.target.closest('.btn-login');
      if (!btn) return;

      const tr    = btn.closest('tr');
      const tds   = tr.querySelectorAll('td');

      // Table order: [0]=Batch, [1]=Link, [2]=Year, [3]=Sub-Module, [4]=Start, [5]=End, [6]=Login btn
      const batch     = tds[0]?.textContent.trim() || '';
      const link      = tds[1]?.textContent.trim() || '';
      const year      = tds[2]?.textContent.trim() || '';
      const submodule = tds[3]?.textContent.trim() || '';

      // Fill context
      loginModalEl.querySelector('#loginBatch').textContent     = batch;
      loginModalEl.querySelector('#loginSubmodule').textContent = submodule;
      loginModalEl.querySelector('#loginYear').textContent      = year;
      loginModalEl.querySelector('#loginLink').textContent      = link;

      // Optionally pre-fill saved creds (demo using localStorage key)
      const key = `heLogin:${year}:${batch}:${submodule}`;
      const saved = JSON.parse(localStorage.getItem(key) || 'null');
      const defP = btn.dataset.pass || ''; 
      document.getElementById('loginUsername').value = saved?.u || '';
      document.getElementById('loginPassword').value = (saved?.p ?? defP);
      document.getElementById('loginRemember').checked = !!saved;
    });

    // Handle Save
    document.getElementById('loginForm').addEventListener('submit', (ev) => {
      ev.preventDefault();

      const batch     = loginModalEl.querySelector('#loginBatch').textContent.trim();
      const year      = loginModalEl.querySelector('#loginYear').textContent.trim();
      const submodule = loginModalEl.querySelector('#loginSubmodule').textContent.trim();

      const u = document.getElementById('loginUsername').value.trim();
      const p = document.getElementById('loginPassword').value.trim();
      const remember = document.getElementById('loginRemember').checked;

      // Persist locally (replace with API call if needed)
      const key = `heLogin:${year}:${batch}:${submodule}`;
      if (remember) {
        localStorage.setItem(key, JSON.stringify({ u, p }));
      } else {
        localStorage.removeItem(key);
      }

      // Close modal
      const modal = bootstrap.Modal.getInstance(loginModalEl) || new bootstrap.Modal(loginModalEl);
      modal.hide();

      // Simple feedback (replace with toast if you have one)
      alert('Login details saved for Batch ' + batch + ' (' + submodule + ').');
    });
  }


  
  </script>

    
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const modalEl = document.getElementById('heresultModalmdsr');
    if (!modalEl) return;

    // Build UI once when the modal is first shown
    modalEl.addEventListener('shown.bs.modal', () => {
      if (modalEl.dataset.mdsrInit) return;
      modalEl.dataset.mdsrInit = '1';

      const tbody = modalEl.querySelector('#mdsrTable tbody');
      const pointsTotalEl = modalEl.querySelector('#pointsTotal');

      // Build 15 rows
      for (let i = 1; i <= 15; i++) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="text-muted">${i}</td>
          <td><input class="form-control form-control-sm" name="mdsr_point_${i}" placeholder="Free Text"></td>
          <td><input class="form-control form-control-sm" name="report_expected_${i}" placeholder="Free Text"></td>
          <td>
            <select class="form-select form-select-sm" name="reported_by_${i}">
              <option value="">Choose...</option><option>Yes</option><option>No</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm" name="correct_${i}">
              <option value="">Choose...</option><option>Yes</option><option>No</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm points" name="points_${i}">
              <option value="">Choose...</option><option value="0">0</option>
              <option value="0.5">0.5</option><option value="1">1</option>
            </select>
          </td>`;
        tbody.appendChild(tr);
      }

      // Live total for Points + optional prefill of "Total number of points by center"
      function recomputeTotal() {
        let sum = 0;
        tbody.querySelectorAll('select.points').forEach(s => {
          const v = parseFloat(s.value);
          if (!isNaN(v)) sum += v;
        });
        pointsTotalEl.textContent = sum.toFixed(1);
      }

      // keep these
      tbody.addEventListener('change', e => {
        if (e.target.matches('select.points')) recomputeTotal();
      });
      recomputeTotal();

      // Exporter used by Save/Submit
      window.getMdsrData = function () {
        const rows = [];
        for (let i = 1; i <= 15; i++) {
          rows.push({
            srNo: i,
            mdsrPoint: modalEl.querySelector(`[name="mdsr_point_${i}"]`).value.trim(),
            reportExpected: modalEl.querySelector(`[name="report_expected_${i}"]`).value.trim(),
            reportedBy: modalEl.querySelector(`[name="reported_by_${i}"]`).value,
            correctlyReported: modalEl.querySelector(`[name="correct_${i}"]`).value,
            points: (() => {
              const v = modalEl.querySelector(`[name="points_${i}"]`).value;
              return v === '' ? null : Number(v);
            })()
          });
        }
        return {
          rows,
          totalPoints: parseFloat(pointsTotalEl.textContent),
          histologicDiagnosis: modalEl.querySelector('#histologicDx')?.value || '',
          centerPointsReported: modalEl.querySelector('#pointsReportedByCenter')?.value.trim() || '',
          centerPointsCorrect: modalEl.querySelector('#pointsReportedCorrectly')?.value.trim() || ''
        };
      };

      // Optional: wire buttons
      document.getElementById('saveBtn')?.addEventListener('click', () => {
        console.log('Save payload:', window.getMdsrData());
      });
      document.getElementById('submitBtn')?.addEventListener('click', () => {
        console.log('Submit payload:', window.getMdsrData());
      });
    });
  });

  let ihcActiveEnterBtn = null;

  document.getElementById('reportingTableBody')?.addEventListener('click', (e) => {
    const openBtn = e.target.closest('[data-bs-target="#resultModal"]'); // IHC modal opener
    if (!openBtn) return;
    ihcActiveEnterBtn = openBtn; // remember the exact button in that row
  });

  // --- When IHC modal is submitted, update that button to "Submitted" ---
  document.addEventListener('DOMContentLoaded', () => {
    const ihcModal = document.getElementById('resultModal');
    if (!ihcModal) return;

    // Get the Submit button inside IHC modal footer (it's the 2nd .btn-primary there)
    const footerPrimaryBtns = ihcModal.querySelectorAll('.modal-footer .btn.btn-primary');
    const submitBtn = footerPrimaryBtns[1];  // [Cancel][Save][Submit] -> index 1 is "Submit" in your markup
    if (!submitBtn) return;

    submitBtn.addEventListener('click', () => {
      if (!ihcActiveEnterBtn) return; // safety

      // 1) Change label & style
      ihcActiveEnterBtn.textContent = 'Submitted';
      ihcActiveEnterBtn.classList.remove('btn-primary');
      ihcActiveEnterBtn.classList.add('btn-success');

      // 2) (optional) prevent reopening the modal from that button
      ihcActiveEnterBtn.removeAttribute('data-bs-toggle');
      ihcActiveEnterBtn.removeAttribute('data-bs-target');

      // 3) Close the modal
      (bootstrap.Modal.getInstance(ihcModal) || new bootstrap.Modal(ihcModal)).hide();
    });
  });


  document.addEventListener("DOMContentLoaded", function () {

    function lockRandomParticipantValues(modalEl) {
      const ths = Array.from(modalEl.querySelectorAll("thead th"));
      const pIdx = ths.findIndex(th => /participant\s*score/i.test(th.textContent.trim()));
      if (pIdx === -1) return; // no matching column

      modalEl.querySelectorAll("tbody tr").forEach(tr => {
        const cell = tr.children[pIdx];
        if (!cell) return;

        // Prefer a <select>; fall back to an <input> if present
        const sel = cell.querySelector("select");
        if (sel) {
          // choose from non-empty, non-placeholder options
          const options = Array.from(sel.options).filter(o =>
            (o.value ?? "").trim() !== "" && !/select/i.test(o.textContent)
          );
          if (options.length) {
            const rand = Math.floor(Math.random() * options.length);
            sel.value = options[rand].value;
          }
          sel.disabled = true;           // lock it
          sel.classList.add("locked");   // optional styling hook
        } else {
          const inp = cell.querySelector("input");
          if (inp) {
            const min = inp.min !== "" ? Number(inp.min) : 0;
            const max = inp.max !== "" ? Number(inp.max) : 100;
            const val = Math.floor(Math.random() * (max - min + 1)) + min;
            inp.value = val;
            inp.readOnly = true;
            inp.classList.add("locked");
          }
        }
      });
    }

    // Attach once per modal (so it doesn't re-randomize each open).
    // If you want new randoms every time, remove `{ once: true }`.
    document.querySelectorAll(".enter-result-modal, .modal").forEach(modalEl => {
      modalEl.addEventListener("show.bs.modal", () => lockRandomParticipantValues(modalEl), { once: true });
    });

  });


  </script>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- 1) Normalize submodule names coming from buttons/rows ---
  const NORM = (s) => {
    const t = String(s||'').toLowerCase().replace(/\s+/g,'').replace(/[^a-z0-9]/g,'');
    if (t === 'er') return 'ER';
    if (t === 'pr') return 'PR';
    if (t.startsWith('her2') || t.startsWith('herneu') || t.startsWith('her2neu')) return 'HER2';
    if (t.startsWith('lymph')) return 'LYMPHOMA';
    if (t.startsWith('misc')) return 'MISC';
    return 'ER';
  };
  const DISPLAY = { ER:'ER', PR:'PR', HER2:'HER2/Neu', LYMPHOMA:'Lymphoma', MISC:'Miscellaneous' };

  // --- 2) Default (editable) values per submodule. Tweak these anytime. ---
  const defaultsByKey = {
    ER: {
      stainingPlatform: 'Ventana Benchmark Ultra',
      cloneType: 'Ready to use',
      lotNumber: 'L-ER-1029',
      dilutionFactor: 'RTU',
      dilutionBuffer: 'Ventana - Antibody Diluent Buffer',
      incubationTime: 24,
      incubationTemp: 37,
      hierEnable: 'Yes',
      hierDevice: 'PT Link /PT module',
      hierDeviceOther: '',
      hierBuffer: 'Std - Tris-EDTA pH9 (-)',
      hierBufferOther: '',
      hierTime: 20,
      hierTemp: 97,
      proteolysisEnable: 'Yes',
      proteolysisDetails: 'Dako - Pepsin',
      proteolysisEnzymeOther: '',
      proteolysisTime: 20,
      proteolysisTemp: 37,
      proteolysisheatingtime: 20,
      proteolysisheatingtemp: 97,
      vizMode: 'AUTO',
       

      // AUTO fields
      vizSystemAuto: 'OptiView DAB IHC Detection Kit',
      vizSystemAutoOther: '',
      vizLinker: 'None',
      vizLinkerOther: '',
      vizAmplification: 'None',
      vizAmplificationOther: '',
      ampName: '',
      ampProducer: '',
      ampProductNumber: '',
      incubationLinker: '',
      incubationAmplification: '',
      incubationPolymer: '',
      incubationTempPolymer: '',

      // MANUAL fields
      vizMethod: '2- Layer Technique',
      vizSystemManual: 'OptiView DAB IHC Detection Kit',
      vizSystemManualOther: '',
      vizProducer: 'DAB UV KITS',
      vizProducerOther: '',
      vizProductNumber: '',
      vizIncubationTime: '',
      vizIncubationTemp: '',
      chromotype: 'DAB',          // or '', if you want blank by default
      chromoName: '',
      chromoProducer: '',
      chromoProductNumber: '',
      chromoTime: '',
      chromoTemp: '',
      Enhancement: 'CuSO4'
    },
    PR: {
      stainingPlatform: 'Leica BOND III',
      cloneType: 'Concentrated',
      lotNumber: 'PR-7781',
      dilutionFactor: '1:100',
      dilutionBuffer: 'Leica - Bond Primary Antibody Diluent',
      incubationTime: 20,
      incubationTemp: 25,
      hierEnable: 'Yes',
      hierDevice: 'PT Link /PT module',
      hierDeviceOther: '',
      hierBuffer: 'Std - Citrate pH6 (-)',
      hierBufferOther: '',
      hierTime: 20,
      hierTemp: 97,
      proteolysisEnable: 'Yes',
      proteolysisDetails: 'Dako - Pepsin',
      proteolysisEnzymeOther: '',
      proteolysisTime: 20,
      proteolysisTemp: 37,
      proteolysisheatingtime: 20,
      proteolysisheatingtemp: 97,
            // AUTO fields
      vizSystemAuto: 'OptiView DAB IHC Detection Kit',
      vizSystemAutoOther: '',
      vizLinker: 'None',
      vizLinkerOther: '',
      vizAmplification: 'None',
      vizAmplificationOther: '',
      ampName: '',
      ampProducer: '',
      ampProductNumber: '',
      incubationLinker: '',
      incubationAmplification: '',
      incubationPolymer: '',
      incubationTempPolymer: '',

      // MANUAL fields
      vizMethod: '2- Layer Technique',
      vizSystemManual: 'OptiView DAB IHC Detection Kit',
      vizSystemManualOther: '',
      vizProducer: 'DAB UV KITS',
      vizProducerOther: '',
      vizProductNumber: '',
      vizIncubationTime: '',
      vizIncubationTemp: '',
      chromotype: 'DAB',          // or '', if you want blank by default
      chromoName: '',
      chromoProducer: '',
      chromoProductNumber: '',
      chromoTime: '',
      chromoTemp: '',
      Enhancement: 'Others',
      enhanceOther: ''
    },
    HER2: {
      stainingPlatform: 'Dako Omnis',
      cloneType: 'Ready to use',
      lotNumber: 'H2-5543',
      dilutionFactor: 'RTU',
      dilutionBuffer: 'Dako - REAL Antibody Diluent',
      incubationTime: 30,
      incubationTemp: 37,
      hierEnable: 'Yes',
      hierDevice: 'Declocking chamber',
      hierDeviceOther: '',
      hierBuffer: 'Std - Tris-EDTA pH9 (-)',
      hierBufferOther: '',
      hierTime: 15,
      hierTemp: 110,
      proteolysisEnable: 'Yes',
      proteolysisDetails: 'Dako - Pepsin',
      proteolysisEnzymeOther: '',
      proteolysisTime: 20,
      proteolysisTemp: 37,
      proteolysisheatingtime: 20,
      proteolysisheatingtemp: 97,
            // AUTO fields
      vizSystemAuto: 'OptiView DAB IHC Detection Kit',
      vizSystemAutoOther: '',
      vizLinker: 'None',
      vizLinkerOther: '',
      vizAmplification: 'None',
      vizAmplificationOther: '',
      ampName: '',
      ampProducer: '',
      ampProductNumber: '',
      incubationLinker: '',
      incubationAmplification: '',
      incubationPolymer: '',
      incubationTempPolymer: '',

      // MANUAL fields
      vizMethod: '2- Layer Technique',
      vizSystemManual: 'OptiView DAB IHC Detection Kit',
      vizSystemManualOther: '',
      vizProducer: 'DAB UV KITS',
      vizProducerOther: '',
      vizProductNumber: '',
      vizIncubationTime: '',
      vizIncubationTemp: '',
      chromotype: 'DAB',          // or '', if you want blank by default
      chromoName: '',
      chromoProducer: '',
      chromoProductNumber: '',
      chromoTime: '',
      chromoTemp: '',
      Enhancement: 'Others',
      enhanceOther: ''
    },
    LYMPHOMA: {
      stainingPlatform: 'Manual',
      cloneType: 'Concentrated',
      lotNumber: 'LY-3302',
      dilutionFactor: '1:50',
      dilutionBuffer: 'Cell Marque - Diamond - Antibody Diluent',
      incubationTime: 15,
      incubationTemp: 25,
      hierEnable: 'Yes',
      hierDevice: 'Microwave Oven',
      hierDeviceOther: '',
      hierBuffer: 'Std - EDTA pH8 (-)',
      hierBufferOther: '',
      hierTime: 20,
      hierTemp: 95,
      proteolysisEnable: 'Yes',
      proteolysisDetails: 'Dako - Pepsin',
      proteolysisEnzymeOther: '',
      proteolysisTime: 20,
      proteolysisTemp: 37,
      proteolysisheatingtime: 20,
      proteolysisheatingtemp: 97,

            // AUTO fields
      vizSystemAuto: 'OptiView DAB IHC Detection Kit',
      vizSystemAutoOther: '',
      vizLinker: 'None',
      vizLinkerOther: '',
      vizAmplification: 'None',
      vizAmplificationOther: '',
      ampName: '',
      ampProducer: '',
      ampProductNumber: '',
      incubationLinker: '',
      incubationAmplification: '',
      incubationPolymer: '',
      incubationTempPolymer: '',

      // MANUAL fields
      vizMethod: '2- Layer Technique',
      vizSystemManual: 'OptiView DAB IHC Detection Kit',
      vizSystemManualOther: '',
      vizProducer: 'DAB UV KITS',
      vizProducerOther: '',
      vizProductNumber: '',
      vizIncubationTime: '',
      vizIncubationTemp: '',

      chromotype: 'DAB',          // or '', if you want blank by default
      chromoName: '',
      chromoProducer: '',
      chromoProductNumber: '',
      chromoTime: '',
      chromoTemp: '',
      Enhancement: 'None'
    },
    MISC: {
      stainingPlatform: 'Thermo Autostainer 36/48/72',
      cloneType: 'Ready to use',
      lotNumber: 'MISC-9011',
      dilutionFactor: 'RTU',
      dilutionBuffer: 'Diagnostic Biosystem - Primary Antibody Diluent',
      incubationTime: 18,
      incubationTemp: 25,
      hierEnable: 'Yes',
      hierDevice: 'Water Bath',
      hierDeviceOther: '',
      hierBuffer: 'Std - Citrate pH6 (-)',
      hierBufferOther: '',
      hierTime: 20,
      hierTemp: 95,
      proteolysisEnable: 'Yes',
      proteolysisDetails: 'Dako - Pepsin',
      proteolysisEnzymeOther: '',
      proteolysisTime: 20,
      proteolysisTemp: 37,
      proteolysisheatingtime: 20,
      proteolysisheatingtemp: 97,

            // AUTO fields
      vizSystemAuto: 'OptiView DAB IHC Detection Kit',
      vizSystemAutoOther: '',
      vizLinker: 'None',
      vizLinkerOther: '',
      vizAmplification: 'None',
      vizAmplificationOther: '',
      ampName: '',
      ampProducer: '',
      ampProductNumber: '',
      incubationLinker: '',
      incubationAmplification: '',
      incubationPolymer: '',
      incubationTempPolymer: '',

      // MANUAL fields
      vizMethod: '2- Layer Technique',
      vizSystemManual: 'OptiView DAB IHC Detection Kit',
      vizSystemManualOther: '',
      vizProducer: 'DAB UV KITS',
      vizProducerOther: '',
      vizProductNumber: '',
      vizIncubationTime: '',
      vizIncubationTemp: '',
      chromotype: 'DAB',          // or '', if you want blank by default
      chromoName: '',
      chromoProducer: '',
      chromoProductNumber: '',
      chromoTime: '',
      chromoTemp: '',
      Enhancement: 'Others',
      enhanceOther: ''
    }
  };

  // Expose (optional) so you can tweak from console if needed
  window.protocolPrefills = {...defaultsByKey};

  // --- 3) Grab modal elements once ---
  const modalEl = document.getElementById('protocolModal');
  if (!modalEl) return;

  const els = {
    title: document.getElementById('protocolModalLabel'),
    platform: document.getElementById('stainingPlatform'),
    platformOtherWrap: document.getElementById('otherStainingPlatformDiv'),
    platformOther: document.getElementById('otherStainingPlatform'),

    cloneType: document.getElementById('cloneType'),
    lotNumber: document.getElementById('lotNumber'),
    dilutionFactor: document.getElementById('dilutionFactor'),

    dilutionBuffer: document.getElementById('dilutionBuffer'),
    dilutionOtherWrap: document.getElementById('otherDilutionFields'),
    bufferName: document.getElementById('bufferName'),
    bufferProducer: document.getElementById('bufferProducer'),
    productNumber: document.getElementById('productNumber'),

    incubationTime: document.getElementById('incubationTime'),
    incubationTemp: document.getElementById('incubationTemp'),


    hierEnable: document.getElementById('hierEnable'),
    hierDetails: document.getElementById('hierDetails'),

    hierDevice: document.getElementById('hierDevice'),
    hierDeviceOtherWrap: document.getElementById('hierDeviceOtherWrap'),
    hierDeviceOther: document.getElementById('hierDeviceOther'),

    hierBuffer: document.getElementById('hierBuffer'),
    hierBufferOtherWrap: document.getElementById('hierBufferOtherWrap'),
    hierBufferOther: document.getElementById('hierBufferOther'),

    hierTime: document.getElementById('hierTime'),
    hierTemp: document.getElementById('hierTemp'),

    proteolysisEnable: document.getElementById('proteolysisEnable'),
    proteolysisDetails: document.getElementById('proteolysisDetails'),
    proteolysisEnzymeOther: document.getElementById('proteolysisEnzyme'),
    proteolysisTime: document.getElementById('proteolysisTime'),
    proteolysisTemp: document.getElementById('proteolysisTemp'),
    proteolysisheatingtime: document.getElementById('proteolysisheatingtime'),
    proteolysisheatingtemp: document.getElementById('proteolysisheatingtemp'),
    
    
    // Visualization wrappers
    vizAuto: document.getElementById('vizAuto'),
    vizManual: document.getElementById('vizManual'),

    // AUTO fields
    vizSystemAuto: document.getElementById('vizSystemAuto'),
    vizSystemAutoOtherWrap: document.getElementById('vizSystemAutoOtherWrap'),
    vizSystemAutoOther: document.getElementById('vizSystemAutoOther'),
    vizLinker: document.getElementById('vizLinker'),
    vizLinkerOtherWrap: document.getElementById('vizLinkerOtherWrap'),
    vizLinkerOther: document.getElementById('vizLinkerOther'),
    vizAmplification: document.getElementById('vizAmplification'),
    vizAmplificationOtherWrap: document.getElementById('vizAmplificationOtherWrap'),
    vizAmplificationOther: document.getElementById('vizAmplificationOther'),
    ampName: document.getElementById('ampName'),
    ampProducer: document.getElementById('ampProducer'),
    ampProductNumber: document.getElementById('ampProductNumber'),
    incubationLinker: document.getElementById('incubationLinker'),
    incubationAmplification: document.getElementById('incubationAmplification'),
    incubationPolymer: document.getElementById('incubationPolymer'),
    incubationTempPolymer: document.getElementById('incubationTempPolymer'),

    // MANUAL fields
    vizMethod: document.getElementById('vizMethod'),
    vizSystemManual: document.getElementById('vizSystemManual'),
    vizSystemManualOtherWrap: document.getElementById('vizSystemManualOtherWrap'),
    vizSystemManualOther: document.getElementById('vizSystemManualOther'),
    vizProducer: document.getElementById('vizProducer'),
    vizProducerOtherWrap: document.getElementById('vizProducerOtherWrap'),
    vizProducerOther: document.getElementById('vizProducerOther'),
    vizProductNumber: document.getElementById('vizProductNumber'),
    vizIncubationTime: document.getElementById('vizIncubationTime'),
    vizIncubationTemp: document.getElementById('vizIncubationTemp'),


    chromotype: document.getElementById('chromotype'),
    chromoOtherWrap: document.getElementById('chromoOtherWrap'),
    chromoName: document.getElementById('chromoName'),
    chromoProducer: document.getElementById('chromoProducer'),
    chromoProductNumber: document.getElementById('chromoProductNumber'),
    chromoTime: document.getElementById('chromoTime'),
    chromoTemp: document.getElementById('chromoTemp'),

    enhancementSelect: document.getElementById('enhancementSelect'),
    enhanceOtherWrap: document.getElementById('enhanceOtherWrap'),
    enhanceOther: document.getElementById('enhanceOther'),


  };

  // --- 4) Helpers ---
  function setSelectByText(sel, value) {
    if (!sel) return;
    const v = String(value ?? '').trim().toLowerCase();
    const opt = [...sel.options].find(o => o.text.trim().toLowerCase() === v);
    sel.value = opt ? opt.value : '';
  }




  function updateVisualizationMode() {
    const val = (els.platform?.value || '').toLowerCase();
    const manualLike = (val === 'manual' || val === 'others');

    // Show/Hide groups
    els.vizAuto?.classList.toggle('d-none', manualLike);
    els.vizManual?.classList.toggle('d-none', !manualLike);

    // Disable inputs in the hidden group
    const disableGroup = (root, off) => {
      if (!root) return;
      root.querySelectorAll('input,select,textarea').forEach(x => x.disabled = off);
    };
    disableGroup(els.vizAuto, manualLike);
    disableGroup(els.vizManual, !manualLike);
  }

  function toggleOthers() {
    // Staining platform "Others"
    if (els.platform) {
      const isOther = els.platform.value === 'Others';
      els.platformOtherWrap?.classList.toggle('d-none', !isOther);
      if (!isOther && els.platformOther) els.platformOther.value = '';
    }
    // Dilution buffer "Others"
    if (els.dilutionBuffer) {
      const isOther = els.dilutionBuffer.value === 'Others';
      els.dilutionOtherWrap?.classList.toggle('d-none', !isOther);
      if (!isOther) {
        els.bufferName && (els.bufferName.value = '');
        els.bufferProducer && (els.bufferProducer.value = '');
        els.productNumber && (els.productNumber.value = '');
      }
    }


    if (els.hierEnable && els.hierDetails) {
      const on = (els.hierEnable.value || 'Yes') === 'Yes';
      els.hierDetails.classList.toggle('d-none', !on);

      // Disable/enable children when hidden
      els.hierDetails.querySelectorAll('input,select,textarea').forEach(el => {
        el.disabled = !on;
        if (!on) {
          // optional: clear when disabled
          if (el.tagName === 'SELECT') el.selectedIndex = 0;
          if (el.tagName === 'INPUT') el.value = '';
        }
      });


      
    }

    // Device "Others"
    if (els.hierDevice) {
      const devOther = els.hierDevice.value === 'Others (add specify)';
      els.hierDeviceOtherWrap?.classList.toggle('d-none', !devOther);
      if (!devOther && els.hierDeviceOther) els.hierDeviceOther.value = '';
    }

    // Buffer "Others"
    if (els.hierBuffer) {
      const bufOther = els.hierBuffer.value === 'Others,Then Specify';
      els.hierBufferOtherWrap?.classList.toggle('d-none', !bufOther);
      if (!bufOther && els.hierBufferOther) els.hierBufferOther.value = '';
    }


    // Proteolysis 
    if (els.proteolysisEnable && els.proteolysisDetails) {
      const on = (els.proteolysisEnable.value || 'Yes') === 'Yes';
      els.proteolysisDetails.classList.toggle('d-none', !on);

      // Disable/enable children when hidden
      els.proteolysisDetails.querySelectorAll('input,select,textarea').forEach(el => {
        el.disabled = !on;
        if (!on) {
          // optional: clear when disabled
          if (el.tagName === 'SELECT') el.selectedIndex = 0;
          if (el.tagName === 'INPUT') el.value = '';
        }
      });


      
    }

    // Proteolysis "Others"
    if (els.proteolysisEnzyme) {
      const enzOther = els.proteolysisEnzyme.value === 'Others (add specify)';
      els.proteolysisEnzymeOtherWrap?.classList.toggle('d-none', !enzOther);
      if (!enzOther && els.proteolysisEnzymeOther) els.proteolysisEnzymeOther.value = '';
    }


    updateVisualizationMode();

    // AUTO "Others"
    if (els.vizSystemAuto) {
      const o = els.vizSystemAuto.value === 'Others,Then Specify';
      els.vizSystemAutoOtherWrap?.classList.toggle('d-none', !o);
      if (!o && els.vizSystemAutoOther) els.vizSystemAutoOther.value = '';
    }
    if (els.vizLinker) {
      const o = els.vizLinker.value === 'Others,Then Specify';
      els.vizLinkerOtherWrap?.classList.toggle('d-none', !o);
      if (!o && els.vizLinkerOther) els.vizLinkerOther.value = '';
    }
    if (els.vizAmplification) {
      const o = els.vizAmplification.value === 'Others,Then Specify';
      els.vizAmplificationOtherWrap?.classList.toggle('d-none', !o);
      if (!o && els.vizAmplificationOther) els.vizAmplificationOther.value = '';
    }

    // MANUAL "Others"
    if (els.vizSystemManual) {
      const o = els.vizSystemManual.value === 'Others,Then Specify';
      els.vizSystemManualOtherWrap?.classList.toggle('d-none', !o);
      if (!o && els.vizSystemManualOther) els.vizSystemManualOther.value = '';
    }
    if (els.vizProducer) {
      const o = els.vizProducer.value === 'Other (please specify)';
      els.vizProducerOtherWrap?.classList.toggle('d-none', !o);
      if (!o && els.vizProducerOther) els.vizProducerOther.value = '';
    }



    if (els.chromotype) {
      const isOther = els.chromotype.value === 'Others,Then Specify';
      els.chromoOtherWrap?.classList.toggle('d-none', !isOther);

      // Optionally clear when hiding
      if (!isOther) {
        els.chromoName && (els.chromoName.value = '');
        els.chromoProducer && (els.chromoProducer.value = '');
        els.chromoProductNumber && (els.chromoProductNumber.value = '');
        els.chromoTime && (els.chromoTime.value = '');
        els.chromoTemp && (els.chromoTemp.value = '');
      }
    }


    if (els.enhancementSelect) {
      const enhOther = els.enhancementSelect.value === 'Others';
      els.enhanceOtherWrap?.classList.toggle('d-none', !enhOther);
      if (!enhOther && els.enhanceOther) {
        els.enhanceOther.value = ''; // optional clear when hiding
      }
    }



    

  }

  function fillForm(rec) {
    setSelectByText(els.platform, rec.stainingPlatform);
    setSelectByText(els.cloneType, rec.cloneType);
    setSelectByText(els.dilutionBuffer, rec.dilutionBuffer);
    setSelectByText(els.hierEnable, rec.hierEnable ?? 'Yes');
    setSelectByText(els.hierDevice, rec.hierDevice);
    setSelectByText(els.hierBuffer, rec.hierBuffer);


    // Proteolysis

    setSelectByText(els.proteolysisEnable, rec.proteolysisEnable ?? 'Yes');
    setSelectByText(els.proteolysisEnzyme, rec.proteolysisEnzyme);
    setSelectByText(els.enhancementSelect, rec.enhancementSelect);


    if (els.lotNumber)      els.lotNumber.value      = rec.lotNumber ?? '';
    if (els.dilutionFactor) els.dilutionFactor.value = rec.dilutionFactor ?? '';
    if (els.incubationTime) els.incubationTime.value = rec.incubationTime ?? '';
    if (els.incubationTemp) els.incubationTemp.value = rec.incubationTemp ?? '';
    if (els.hierDeviceOther) els.hierDeviceOther.value = rec.hierDeviceOther ?? '';
    if (els.hierBufferOther) els.hierBufferOther.value = rec.hierBufferOther ?? '';


    if (els.proteolysisEnzymeOther) els.proteolysisEnzymeOther.value = rec.proteolysisEnzymeOther ?? '';


    // optional detail fields if "Others" were previously saved
    if (els.platformOther)  els.platformOther.value  = rec.otherStainingPlatform ?? '';
    if (els.bufferName)     els.bufferName.value     = rec.bufferName ?? '';
    if (els.bufferProducer) els.bufferProducer.value = rec.bufferProducer ?? '';
    if (els.productNumber)  els.productNumber.value  = rec.productNumber ?? '';
    if (els.hierTime) els.hierTime.value = rec.hierTime ?? '';
    if (els.hierTemp) els.hierTemp.value = rec.hierTemp ?? '';

    if (els.proteolysisTime) els.proteolysisTime.value = rec.proteolysisTime ?? '';
    if (els.proteolysisTemp) els.proteolysisTemp.value = rec.proteolysisTemp  ?? '';


    if (els.proteolysisheatingtime) els.proteolysisheatingtime.value = rec.proteolysisheatingtime ?? '';
    if (els.proteolysisheatingtemp) els.proteolysisheatingtemp.value = rec.proteolysisheatingtemp ?? '';


    const platformNow = (els.platform?.value || '').toLowerCase();
    const manualLike = (platformNow === 'manual' || platformNow === 'others');
    updateVisualizationMode();

    // AUTO
    setSelectByText(els.vizSystemAuto, rec.vizSystemAuto);
    if (els.vizSystemAutoOther) els.vizSystemAutoOther.value = rec.vizSystemAutoOther ?? '';
    setSelectByText(els.vizLinker, rec.vizLinker);
    if (els.vizLinkerOther) els.vizLinkerOther.value = rec.vizLinkerOther ?? '';
    setSelectByText(els.vizAmplification, rec.vizAmplification);
    if (els.vizAmplificationOther) els.vizAmplificationOther.value = rec.vizAmplificationOther ?? '';
    if (els.ampName) els.ampName.value = rec.ampName ?? '';
    if (els.ampProducer) els.ampProducer.value = rec.ampProducer ?? '';
    if (els.ampProductNumber) els.ampProductNumber.value = rec.ampProductNumber ?? '';
    if (els.incubationLinker) els.incubationLinker.value = rec.incubationLinker ?? '';
    if (els.incubationAmplification) els.incubationAmplification.value = rec.incubationAmplification ?? '';
    if (els.incubationPolymer) els.incubationPolymer.value = rec.incubationPolymer ?? '';
    if (els.incubationTempPolymer) els.incubationTempPolymer.value = rec.incubationTempPolymer ?? '';

    // MANUAL
    setSelectByText(els.vizMethod, rec.vizMethod);
    setSelectByText(els.vizSystemManual, rec.vizSystemManual);
    if (els.vizSystemManualOther) els.vizSystemManualOther.value = rec.vizSystemManualOther ?? '';
    setSelectByText(els.vizProducer, rec.vizProducer);
    if (els.vizProducerOther) els.vizProducerOther.value = rec.vizProducerOther ?? '';
    if (els.vizProductNumber) els.vizProductNumber.value = rec.vizProductNumber ?? '';
    if (els.vizIncubationTime) els.vizIncubationTime.value = rec.vizIncubationTime ?? '';
    if (els.vizIncubationTemp) els.vizIncubationTemp.value = rec.vizIncubationTemp ?? '';



    setSelectByText(els.chromotype, rec.chromotype);
    if (els.chromoName)          els.chromoName.value = rec.chromoName ?? '';
    if (els.chromoProducer)      els.chromoProducer.value = rec.chromoProducer ?? '';
    if (els.chromoProductNumber) els.chromoProductNumber.value = rec.chromoProductNumber ?? '';
    if (els.chromoTime)          els.chromoTime.value = rec.chromoTime ?? '';
    if (els.chromoTemp)          els.chromoTemp.value = rec.chromoTemp ?? '';
    if (els.enhanceOther) els.enhanceOther.value = rec.enhanceOther ?? '';
    
    
    
    toggleOthers();
  }

  function readForm() {

    const hierEnabled = els.hierEnable?.value || 'Yes';
    const proteolysisEnabled = els.proteolysisEnable?.value || 'Yes';
    const readIf = (cond, v) => (cond ? v : '');
    const data = {
      stainingPlatform: els.platform?.value || '',
      otherStainingPlatform: (els.platform?.value === 'Others') ? (els.platformOther?.value || '') : '',
      cloneType: els.cloneType?.value || '',
      lotNumber: els.lotNumber?.value || '',
      dilutionFactor: els.dilutionFactor?.value || '',
      dilutionBuffer: els.dilutionBuffer?.value || '',
      bufferName: (els.dilutionBuffer?.value === 'Others') ? (els.bufferName?.value || '') : '',
      bufferProducer: (els.dilutionBuffer?.value === 'Others') ? (els.bufferProducer?.value || '') : '',
      productNumber: (els.dilutionBuffer?.value === 'Others') ? (els.productNumber?.value || '') : '',
      incubationTime: els.incubationTime?.value || '',
      incubationTemp: els.incubationTemp?.value || '',
      hierEnable: hierEnabled,
      hierDevice: readIf(hierEnabled === 'Yes', els.hierDevice?.value || ''),
      hierDeviceOther: readIf(hierEnabled === 'Yes' && els.hierDevice?.value === 'Others (add specify)', els.hierDeviceOther?.value || ''),
      hierBuffer: readIf(hierEnabled === 'Yes', els.hierBuffer?.value || ''),
      hierBufferOther: readIf(hierEnabled === 'Yes' && els.hierBuffer?.value === 'Others,Then Specify', els.hierBufferOther?.value || ''),
      hierTime: readIf(hierEnabled === 'Yes', els.hierTime?.value || ''),
      hierTemp: readIf(hierEnabled === 'Yes', els.hierTemp?.value || ''),



      proteolysisEnable: proteolysisEnabled,
      proteolysisEnzyme: readIf(proteolysisEnabled === 'Yes', els.proteolysisEnzyme?.value || ''),
      proteolysisEnzymeOther: readIf(proteolysisEnabled  === 'Yes' && els.proteolysisEnzyme?.value === 'Others (add specify)', els.proteolysisEnzymeOther?.value || ''),
      proteolysisTime: readIf(proteolysisEnabled === 'Yes', els.proteolysisTime?.value || ''),
      proteolysisTemp: readIf(proteolysisEnabled === 'Yes', els.proteolysisTemp?.value || ''),
      proteolysisheatingtime: readIf(proteolysisEnabled === 'Yes', els.proteolysisheatingtime?.value || ''),
      proteolysisheatingtemp: readIf(proteolysisEnabled === 'Yes', els.proteolysisheatingtemp?.value || ''),

      // decide mode by platform every time
      vizMode: ((els.platform?.value || '').toLowerCase() === 'manual' || (els.platform?.value || '').toLowerCase() === 'others') ? 'MANUAL' : 'AUTO',

      // AUTO fields
      vizSystemAuto: els.vizSystemAuto?.value || '',
      vizSystemAutoOther: (els.vizSystemAuto?.value === 'Others,Then Specify') ? (els.vizSystemAutoOther?.value || '') : '',
      vizLinker: els.vizLinker?.value || '',
      vizLinkerOther: (els.vizLinker?.value === 'Others,Then Specify') ? (els.vizLinkerOther?.value || '') : '',
      vizAmplification: els.vizAmplification?.value || '',
      vizAmplificationOther: (els.vizAmplification?.value === 'Others,Then Specify') ? (els.vizAmplificationOther?.value || '') : '',
      ampName: els.ampName?.value || '',
      ampProducer: els.ampProducer?.value || '',
      ampProductNumber: els.ampProductNumber?.value || '',
      incubationLinker: els.incubationLinker?.value || '',
      incubationAmplification: els.incubationAmplification?.value || '',
      incubationPolymer: els.incubationPolymer?.value || '',
      incubationTempPolymer: els.incubationTempPolymer?.value || '',

      // MANUAL fields
      vizMethod: els.vizMethod?.value || '',
      vizSystemManual: els.vizSystemManual?.value || '',
      vizSystemManualOther: (els.vizSystemManual?.value === 'Others,Then Specify') ? (els.vizSystemManualOther?.value || '') : '',
      vizProducer: els.vizProducer?.value || '',
      vizProducerOther: (els.vizProducer?.value === 'Other (please specify)') ? (els.vizProducerOther?.value || '') : '',
      vizProductNumber: els.vizProductNumber?.value || '',
      vizIncubationTime: els.vizIncubationTime?.value || '',
      vizIncubationTemp: els.vizIncubationTemp?.value || '',


      chromotype: els.chromotype?.value || '',
      chromoName: (els.chromotype?.value === 'Others,Then Specify') ? (els.chromoName?.value || '') : '',
      chromoProducer: (els.chromotype?.value === 'Others,Then Specify') ? (els.chromoProducer?.value || '') : '',
      chromoProductNumber: (els.chromotype?.value === 'Others,Then Specify') ? (els.chromoProductNumber?.value || '') : '',
      chromoTime: (els.chromotype?.value === 'Others,Then Specify') ? (els.chromoTime?.value || '') : '',
      chromoTemp: (els.chromotype?.value === 'Others,Then Specify') ? (els.chromoTemp?.value || '') : '',


      enhancementSelect: els.enhancementSelect?.value || '',
      enhanceOther: (els.enhancementSelect?.value === 'Others') ? (els.enhanceOther?.value || '') : '',

    };
    return data;
  }

  const keyFor = (modKey, run) => `protocol:${modKey}:${run || 'all'}`;

  // Keep "Others" UI reactive if user changes the dropdowns
  els.platform?.addEventListener('change', toggleOthers);
  els.dilutionBuffer?.addEventListener('change', toggleOthers);
  els.hierEnable?.addEventListener('change', toggleOthers);
  els.hierDevice?.addEventListener('change', toggleOthers);
  els.hierBuffer?.addEventListener('change', toggleOthers);

  els.platform?.addEventListener('change', toggleOthers);

  els.vizSystemAuto?.addEventListener('change', toggleOthers);
  els.vizLinker?.addEventListener('change', toggleOthers);
  els.vizAmplification?.addEventListener('change', toggleOthers);

  els.vizSystemManual?.addEventListener('change', toggleOthers);
  els.vizProducer?.addEventListener('change', toggleOthers);
  

  els.proteolysisEnable?.addEventListener('change', toggleOthers);
  els.proteolysisEnzyme?.addEventListener('change', toggleOthers);
  els.chromotype?.addEventListener('change', toggleOthers);

  els.enhancementSelect?.addEventListener('change', toggleOthers);

  // --- 5) On open: detect submodule+run from the button, then prefill (saved -> defaults) ---
  modalEl.addEventListener('show.bs.modal', (ev) => {
    const btn = ev.relatedTarget; // Bootstrap 5 way to get the opener
    const row = btn?.closest('tr');

    const subRaw = btn?.dataset.submodule || row?.children?.[1]?.textContent?.trim() || 'ER';
    const run    = btn?.dataset.run       || row?.children?.[0]?.textContent?.trim() || '';

    const modKey = NORM(subRaw);
    modalEl.dataset.modKey = modKey;
    modalEl.dataset.run = run;

    const saved = JSON.parse(localStorage.getItem(keyFor(modKey, run)) || 'null') || {};
    const def   = defaultsByKey[modKey] || {};
    const rec   = { ...def, ...saved };

    if (els.title) els.title.textContent = `Protocol — ${DISPLAY[modKey] || subRaw}${run ? ` (Run ${run})` : ''}`;
    fillForm(rec);
  });

  // --- 6) Auto-save your edits to localStorage when the modal closes ---
  modalEl.addEventListener('hidden.bs.modal', () => {
    const modKey = modalEl.dataset.modKey;
    const run    = modalEl.dataset.run;
    if (!modKey) return;
    const payload = readForm();
    localStorage.setItem(keyFor(modKey, run), JSON.stringify(payload));
  });

});
</script>


</body>
</html>
